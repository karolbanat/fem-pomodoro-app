"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var settingsButton=document.querySelector("#settings-button"),settingsModal=document.querySelector("#settings-modal"),closeModalButton=document.querySelector("#close-settings-modal-button"),settingsForm=settingsModal.querySelector("#settings-form"),pomodoroTimeInput=settingsForm.querySelector("#pomodoro-time"),shortBreakTimeInput=settingsForm.querySelector("#short-break-time"),longBreakTimeInput=settingsForm.querySelector("#long-break-time"),fontRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="font"]')),colourRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="colour"]')),settingsSubmit=settingsForm.querySelector('button[type="submit"]'),timeStateButtons=Array.from(document.querySelectorAll(".state-button")),SECONDS_IN_MINUTE=60,DEFAULT_FONT="sans-serif",DEFAULT_COLOUR="red",DEFAULT_POMODORO_TIME=25,DEFAULT_SHORT_BREAK_TIME=5,DEFAULT_LONG_BREAK_TIME=15,AppTheme=_createClass(function t(){var o=this;_classCallCheck(this,t),this.colour=DEFAULT_COLOUR,this.font=DEFAULT_FONT,this.updateTheme=function(t,e){o.colour=e,o.font=t,document.body.dataset.font=t,document.body.dataset.theme=e}}),appTheme=new AppTheme,PomodoroTimer=_createClass(function t(){var e=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,t),this.time=o,this.observers=[],this.state="INITIAL",this.start=function(){e.setState("COUNTING"),e.count()},this.count=function(){0===e.getCurrentTime()?(e.setState("END"),clearTimeout(e.countTimeout)):e.countTimeout=setTimeout(function(){e.updateTime(e.getCurrentTime()-1),e.count()},1e3)},this.pause=function(){e.setState("PAUSED"),clearTimeout(e.countTimeout)},this.restart=function(){e.setState("INITIAL"),e.updateTime(e.time),clearTimeout(e.countTimeout)},this.getTime=function(){return e.time},this.getCurrentTime=function(){return e.countingTime},this.setTime=function(t){e.time=t,e.updateTime(e.time)},this.updateTime=function(t){e.countingTime=t,e.notifyObservers()},this.getState=function(){return e.state},this.setState=function(t){e.state=t,"END"===e.state&&e.notifyObservers()},this.addObserver=function(t){e.observers.push(t)},this.notifyObservers=function(){e.observers.forEach(function(t){return t.update(e)})},this.countingTime=o}),TimerView=_createClass(function t(e){var r=this;_classCallCheck(this,t),this.update=function(t){r.updateTime(t.getCurrentTime()),r.updateProgressBar(t.getCurrentTime(),t.getTime()),"END"===t.getState()&&(r.updateButtonLabel("restart"),r.resetProgressBar())},this.updateButtonLabel=function(t){r.timerButton.innerText=t},this.updateTime=function(t){r.timerTime.innerHTML=formatTime(t)},this.updateProgressBar=function(t,e){var o=Number(getComputedStyle(r.timeProgressBar).getPropertyValue("--circumference"));r.timeProgressBar.style.setProperty("--progress",((1-t/e)*o).toFixed(0))},this.resetProgressBar=function(){r.timeProgressBar.style.setProperty("--progress","0")},this.timer=document.querySelector(".timer"),this.timeProgressBar=this.timer.querySelector("#progress-bar"),this.timerTime=this.timer.querySelector("#timer-time"),this.timerButton=this.timer.querySelector("#timer-button"),this.timerButton.addEventListener("click",e)}),TimerController=_createClass(function t(e){var o=this;_classCallCheck(this,t),this.timer=e,this.timerAction=function(){switch(o.timer.getState()){case"INITIAL":case"PAUSED":o.startTimer();break;case"COUNTING":o.pauseTimer();break;case"END":o.restartTimer()}},this.startTimer=function(){o.timer.start(),o.view.updateButtonLabel("pause")},this.pauseTimer=function(){o.timer.pause(),o.view.updateButtonLabel("start")},this.restartTimer=function(){o.timer.restart(),o.view.updateButtonLabel("start")},this.setTime=function(t){o.timer.setTime(t)},this.view=new TimerView(this.timerAction),e.addObserver(this.view),this.view.update(this.timer)}),PomodoroApp=_createClass(function t(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_POMODORO_TIME,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:DEFAULT_SHORT_BREAK_TIME,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:DEFAULT_LONG_BREAK_TIME;_classCallCheck(this,t),this.pomodoroTime=e,this.shortBreakTime=o,this.longBreakTime=i,this.appState="POMODORO",this.setTimes=function(t,e,o){r.pomodoroTime=t,r.shortBreakTime=e,r.longBreakTime=o,r.changeState(r.appState)},this.changeState=function(t){r.appState=t,r.timer.restartTimer(),r.setTimerBasedOnState()},this.setTimerBasedOnState=function(){switch(r.appState){case"POMODORO":r.timer.setTime(minutesToSeconds(r.pomodoroTime));break;case"SHORT_BREAK":r.timer.setTime(minutesToSeconds(r.shortBreakTime));break;case"LONG_BREAK":r.timer.setTime(minutesToSeconds(r.longBreakTime))}},this.timer=new TimerController(new PomodoroTimer(minutesToSeconds(this.pomodoroTime)))}),pomodoroApp=new PomodoroApp;function minutesToSeconds(t){return t*SECONDS_IN_MINUTE}function getMinutesFromSeconds(t){return Math.floor(t/SECONDS_IN_MINUTE)}function getRemainingSeconds(t){return t%SECONDS_IN_MINUTE}function addLeadingZero(t){return t<10?"0".concat(t):t.toString()}function formatTime(t){var e=getMinutesFromSeconds(t),t=getRemainingSeconds(t);return addLeadingZero(e)+":"+addLeadingZero(t)}function activateStateButton(t){timeStateButtons.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active")}function openModal(){settingsModal.dataset.open="true"}function closeModal(){settingsModal.dataset.open="false"}settingsSubmit.addEventListener("click",function(t){t.preventDefault();var t=Number(pomodoroTimeInput.value),e=Number(shortBreakTimeInput.value),o=Number(longBreakTimeInput.value),r=fontRadioButtons.find(function(t){return t.checked}).value,i=colourRadioButtons.find(function(t){return t.checked}).value;pomodoroApp.setTimes(t,e,o),appTheme.updateTheme(r,i),closeModal()}),settingsButton.addEventListener("click",function(){openModal()}),null!=closeModalButton&&closeModalButton.addEventListener("click",function(){closeModal()}),timeStateButtons.forEach(function(t){return t.addEventListener("click",function(t){var t=t.target,e=t.dataset.state.toUpperCase();activateStateButton(t),pomodoroApp.changeState(e)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsic2V0dGluZ3NCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXR0aW5nc01vZGFsIiwiY2xvc2VNb2RhbEJ1dHRvbiIsInNldHRpbmdzRm9ybSIsInBvbW9kb3JvVGltZUlucHV0Iiwic2hvcnRCcmVha1RpbWVJbnB1dCIsImxvbmdCcmVha1RpbWVJbnB1dCIsImZvbnRSYWRpb0J1dHRvbnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sb3VyUmFkaW9CdXR0b25zIiwic2V0dGluZ3NTdWJtaXQiLCJ0aW1lU3RhdGVCdXR0b25zIiwiU0VDT05EU19JTl9NSU5VVEUiLCJERUZBVUxUX0ZPTlQiLCJERUZBVUxUX0NPTE9VUiIsIkRFRkFVTFRfUE9NT0RPUk9fVElNRSIsIkRFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSIsIkRFRkFVTFRfTE9OR19CUkVBS19USU1FIiwiQXBwVGhlbWUiLCJfY3JlYXRlQ2xhc3MiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJjb2xvdXIiLCJmb250IiwidXBkYXRlVGhlbWUiLCJib2R5IiwiZGF0YXNldCIsInRoZW1lIiwiYXBwVGhlbWUiLCJQb21vZG9yb1RpbWVyIiwiX3RoaXMyIiwidGltZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9ic2VydmVycyIsInN0YXRlIiwic3RhcnQiLCJzZXRTdGF0ZSIsImNvdW50IiwiZ2V0Q3VycmVudFRpbWUiLCJjbGVhclRpbWVvdXQiLCJjb3VudFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidXBkYXRlVGltZSIsInBhdXNlIiwicmVzdGFydCIsImdldFRpbWUiLCJjb3VudGluZ1RpbWUiLCJzZXRUaW1lIiwibm90aWZ5T2JzZXJ2ZXJzIiwiZ2V0U3RhdGUiLCJhZGRPYnNlcnZlciIsIm9ic2VydmVyIiwicHVzaCIsImZvckVhY2giLCJ1cGRhdGUiLCJUaW1lclZpZXciLCJidXR0b25PbkNsaWNrIiwiX3RoaXMzIiwib2JzZXJ2YWJsZSIsIm9icyIsInVwZGF0ZVByb2dyZXNzQmFyIiwidXBkYXRlQnV0dG9uTGFiZWwiLCJyZXNldFByb2dyZXNzQmFyIiwibGFiZWwiLCJ0aW1lckJ1dHRvbiIsImlubmVyVGV4dCIsInRpbWVyVGltZSIsImlubmVySFRNTCIsImZvcm1hdFRpbWUiLCJjdXJyZW50IiwiYmFzZSIsImNpcmN1bWZlcmVuY2UiLCJOdW1iZXIiLCJnZXRDb21wdXRlZFN0eWxlIiwidGltZVByb2dyZXNzQmFyIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJ0b0ZpeGVkIiwidGltZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiVGltZXJDb250cm9sbGVyIiwiX3RoaXM0IiwidGltZXJBY3Rpb24iLCJzdGFydFRpbWVyIiwicGF1c2VUaW1lciIsInJlc3RhcnRUaW1lciIsInZpZXciLCJQb21vZG9yb0FwcCIsIl90aGlzNSIsInBvbW9kb3JvVGltZSIsInNob3J0QnJlYWtUaW1lIiwibG9uZ0JyZWFrVGltZSIsImFwcFN0YXRlIiwic2V0VGltZXMiLCJwb21vZG9ybyIsInNob3J0QnJlYWsiLCJsb25nQnJlYWsiLCJjaGFuZ2VTdGF0ZSIsInNldFRpbWVyQmFzZWRPblN0YXRlIiwibWludXRlc1RvU2Vjb25kcyIsInBvbW9kb3JvQXBwIiwibWludXRlcyIsImdldE1pbnV0ZXNGcm9tU2Vjb25kcyIsInNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJnZXRSZW1haW5pbmdTZWNvbmRzIiwiYWRkTGVhZGluZ1plcm8iLCJjb25jYXQiLCJ0b1N0cmluZyIsInJlbWFpbmluZ1NlY29uZHMiLCJhY3RpdmF0ZVN0YXRlQnV0dG9uIiwiYnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwib3Blbk1vZGFsIiwib3BlbiIsImNsb3NlTW9kYWwiLCJlIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImNob3NlbkZvbnQiLCJmaW5kIiwiY2hlY2tlZCIs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QU8sQ0FBQSxFQUFFSCxNQUUvRXJCLFlBQVlQLFNBQVNKLEVBQWNDLEVBQWdCQyxDQUFhLEVBQ2hFbEUsU0FBU0osWUFBWXFHLEVBQVlHLENBQVksRUFDN0NQLFdBQVUsQ0FDWCxDQUFDLEVBRUQ5SCxlQUFldUYsaUJBQWlCLFFBQVMsV0FDeENxQyxVQUFTLENBQ1YsQ0FBQyxFQUVEeEgsTUFBQUEsa0JBQUFBLGlCQUFrQm1GLGlCQUFpQixRQUFTLFdBQzNDdUMsV0FBVSxDQUNYLENBQUMsRUFFRC9HLGlCQUFpQjZDLFFBQVEsU0FBQTRELEdBQU0sT0FDOUJBLEVBQU9qQyxpQkFBaUIsUUFBUyxTQUFDd0MsR0FDakMsSUFBTVAsRUFBNEJPLEVBQUVPLE9BQzlCN0YsRUFBMkIrRSxFQUFPekYsUUFBUVUsTUFBTThGLFlBQVcsRUFDakVoQixvQkFBb0JDLENBQU0sRUFDMUJaLFlBQVlILFlBQVloRSxDQUFLLENBQzlCLENBQUMsQ0FBQyxDQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogbW9kYWwgYW5kIG1vZGFsIHJlYWx0ZWQgZWxlbWVudHMgKi9cclxuY29uc3Qgc2V0dGluZ3NCdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NldHRpbmdzLWJ1dHRvbicpO1xyXG5jb25zdCBzZXR0aW5nc01vZGFsOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXR0aW5ncy1tb2RhbCcpO1xyXG5jb25zdCBjbG9zZU1vZGFsQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZS1zZXR0aW5ncy1tb2RhbC1idXR0b24nKTtcclxuXHJcbi8qIHNldHRpbmdzIGZvcm0gZWxlbWVudHMgKi9cclxuY29uc3Qgc2V0dGluZ3NGb3JtOiBIVE1MRm9ybUVsZW1lbnQgPSBzZXR0aW5nc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNzZXR0aW5ncy1mb3JtJyk7XHJcbmNvbnN0IHBvbW9kb3JvVGltZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gc2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwb21vZG9yby10aW1lJyk7XHJcbmNvbnN0IHNob3J0QnJlYWtUaW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignI3Nob3J0LWJyZWFrLXRpbWUnKTtcclxuY29uc3QgbG9uZ0JyZWFrVGltZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gc2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNsb25nLWJyZWFrLXRpbWUnKTtcclxuY29uc3QgZm9udFJhZGlvQnV0dG9uczogQXJyYXk8SFRNTElucHV0RWxlbWVudD4gPSBBcnJheS5mcm9tKFxyXG5cdHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cImZvbnRcIl0nKVxyXG4pO1xyXG5jb25zdCBjb2xvdXJSYWRpb0J1dHRvbnM6IEFycmF5PEhUTUxJbnB1dEVsZW1lbnQ+ID0gQXJyYXkuZnJvbShcclxuXHRzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCJjb2xvdXJcIl0nKVxyXG4pO1xyXG5jb25zdCBzZXR0aW5nc1N1Ym1pdDogSFRNTEJ1dHRvbkVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHJcbi8qIHRpbWUgc3RhdGUgYnV0dG9ucyAqL1xyXG5jb25zdCB0aW1lU3RhdGVCdXR0b25zOiBBcnJheTxIVE1MQnV0dG9uRWxlbWVudD4gPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGF0ZS1idXR0b24nKSk7XHJcblxyXG4vKiBjb25zdGFudHMgKi9cclxuLyogLS0tIGdlbmVyYWwgKi9cclxuY29uc3QgU0VDT05EU19JTl9NSU5VVEU6IG51bWJlciA9IDYwO1xyXG4vKiAtLS0gdGhlbWUgKi9cclxuY29uc3QgREVGQVVMVF9GT05UOiBGb250ID0gJ3NhbnMtc2VyaWYnO1xyXG5jb25zdCBERUZBVUxUX0NPTE9VUjogQ29sb3VyID0gJ3JlZCc7XHJcbi8qIC0tLSB0aW1lcyAqL1xyXG5jb25zdCBERUZBVUxUX1BPTU9ET1JPX1RJTUU6IG51bWJlciA9IDI1O1xyXG5jb25zdCBERUZBVUxUX1NIT1JUX0JSRUFLX1RJTUU6IG51bWJlciA9IDU7XHJcbmNvbnN0IERFRkFVTFRfTE9OR19CUkVBS19USU1FOiBudW1iZXIgPSAxNTtcclxuXHJcbi8qIE9ic2VydmVyIHBhdHRlcm4gaW50ZXJmYWNlcyAqL1xyXG5pbnRlcmZhY2UgT2JzZXJ2YWJsZSB7XHJcblx0YWRkT2JzZXJ2ZXI6IChvYnNlcnZlcjogT2JzZXJ2ZXIpID0+IHZvaWQ7XHJcblx0bm90aWZ5T2JzZXJ2ZXJzOiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgT2JzZXJ2ZXIge1xyXG5cdHVwZGF0ZTogKG9ic2VydmFibGU6IE9ic2VydmFibGUpID0+IHZvaWQ7XHJcbn1cclxuXHJcbi8qIHRoZW1lIHN0YXRlcyAqL1xyXG50eXBlIENvbG91ciA9ICdyZWQnIHwgJ2N5YW4nIHwgJ3Zpb2xldCc7XHJcbnR5cGUgRm9udCA9ICdzZXJpZicgfCAnc2Fucy1zZXJpZicgfCAnbW9ub3NwYWNlJztcclxuXHJcbmludGVyZmFjZSBUaGVtZSB7XHJcblx0Y29sb3VyOiBDb2xvdXI7XHJcblx0Zm9udDogRm9udDtcclxuXHR1cGRhdGVUaGVtZTogKGZvbnQ6IEZvbnQsIGNvbG91cjogQ29sb3VyKSA9PiB2b2lkO1xyXG59XHJcblxyXG5jbGFzcyBBcHBUaGVtZSBpbXBsZW1lbnRzIFRoZW1lIHtcclxuXHRjb2xvdXI6IENvbG91ciA9IERFRkFVTFRfQ09MT1VSO1xyXG5cdGZvbnQ6IEZvbnQgPSBERUZBVUxUX0ZPTlQ7XHJcblxyXG5cdHVwZGF0ZVRoZW1lID0gKGZvbnQ6IEZvbnQsIGNvbG91cjogQ29sb3VyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmNvbG91ciA9IGNvbG91cjtcclxuXHRcdHRoaXMuZm9udCA9IGZvbnQ7XHJcblx0XHRkb2N1bWVudC5ib2R5LmRhdGFzZXQuZm9udCA9IGZvbnQ7XHJcblx0XHRkb2N1bWVudC5ib2R5LmRhdGFzZXQudGhlbWUgPSBjb2xvdXI7XHJcblx0fTtcclxufVxyXG5cclxuY29uc3QgYXBwVGhlbWU6IFRoZW1lID0gbmV3IEFwcFRoZW1lKCk7XHJcblxyXG4vKiBUaW1lciBmdW5jdGlvbmFsaXR5ICovXHJcbnR5cGUgVGltZXJTdGF0ZSA9ICdJTklUSUFMJyB8ICdDT1VOVElORycgfCAnUEFVU0VEJyB8ICdFTkQnO1xyXG5cclxuaW50ZXJmYWNlIFRpbWVyIGV4dGVuZHMgT2JzZXJ2YWJsZSB7XHJcblx0c3RhdGU6IFRpbWVyU3RhdGU7XHJcblx0c3RhcnQ6ICgpID0+IHZvaWQ7XHJcblx0cGF1c2U6ICgpID0+IHZvaWQ7XHJcblx0cmVzdGFydDogKCkgPT4gdm9pZDtcclxuXHRzZXRUaW1lOiAodGltZTogbnVtYmVyKSA9PiB2b2lkO1xyXG5cdGdldFRpbWU6ICgpID0+IG51bWJlcjtcclxuXHRnZXRDdXJyZW50VGltZTogKCkgPT4gbnVtYmVyO1xyXG5cdGdldFN0YXRlOiAoKSA9PiBUaW1lclN0YXRlO1xyXG5cdHNldFN0YXRlOiAoc3RhdGU6IFRpbWVyU3RhdGUpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIFBvbW9kb3JvVGltZXIgaW1wbGVtZW50cyBUaW1lciB7XHJcblx0b2JzZXJ2ZXJzOiBPYnNlcnZlcltdID0gW107XHJcblx0Y291bnRUaW1lb3V0OiBOb2RlSlMuVGltZW91dDtcclxuXHRzdGF0ZTogVGltZXJTdGF0ZSA9ICdJTklUSUFMJztcclxuXHRwcml2YXRlIGNvdW50aW5nVGltZTogbnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHRpbWU6IG51bWJlciA9IDApIHtcclxuXHRcdHRoaXMuY291bnRpbmdUaW1lID0gdGltZTtcclxuXHR9XHJcblxyXG5cdHN0YXJ0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSgnQ09VTlRJTkcnKTtcclxuXHRcdHRoaXMuY291bnQoKTtcclxuXHR9O1xyXG5cclxuXHRjb3VudCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdGlmICh0aGlzLmdldEN1cnJlbnRUaW1lKCkgPT09IDApIHtcclxuXHRcdFx0dGhpcy5zZXRTdGF0ZSgnRU5EJyk7XHJcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLmNvdW50VGltZW91dCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmNvdW50VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVRpbWUodGhpcy5nZXRDdXJyZW50VGltZSgpIC0gMSk7XHJcblx0XHRcdHRoaXMuY291bnQoKTtcclxuXHRcdH0sIDEwMDApO1xyXG5cdH07XHJcblxyXG5cdHBhdXNlID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSgnUEFVU0VEJyk7XHJcblx0XHRjbGVhclRpbWVvdXQodGhpcy5jb3VudFRpbWVvdXQpO1xyXG5cdH07XHJcblxyXG5cdHJlc3RhcnQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnNldFN0YXRlKCdJTklUSUFMJyk7XHJcblx0XHR0aGlzLnVwZGF0ZVRpbWUodGhpcy50aW1lKTtcclxuXHRcdGNsZWFyVGltZW91dCh0aGlzLmNvdW50VGltZW91dCk7XHJcblx0fTtcclxuXHJcblx0Z2V0VGltZSA9ICgpOiBudW1iZXIgPT4gdGhpcy50aW1lO1xyXG5cclxuXHRnZXRDdXJyZW50VGltZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5jb3VudGluZ1RpbWU7XHJcblxyXG5cdHNldFRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWUgPSB0aW1lO1xyXG5cdFx0dGhpcy51cGRhdGVUaW1lKHRoaXMudGltZSk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlVGltZSA9ICh0aW1lOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuY291bnRpbmdUaW1lID0gdGltZTtcclxuXHRcdHRoaXMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcblx0fTtcclxuXHJcblx0Z2V0U3RhdGUgPSAoKTogVGltZXJTdGF0ZSA9PiB0aGlzLnN0YXRlO1xyXG5cclxuXHRzZXRTdGF0ZSA9IChzdGF0ZTogVGltZXJTdGF0ZSk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cclxuXHRcdGlmICh0aGlzLnN0YXRlID09PSAnRU5EJykgdGhpcy5ub3RpZnlPYnNlcnZlcnMoKTtcclxuXHR9O1xyXG5cclxuXHRhZGRPYnNlcnZlciA9IChvYnNlcnZlcjogT2JzZXJ2ZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG5cdH07XHJcblxyXG5cdG5vdGlmeU9ic2VydmVycyA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMub2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4gb2JzZXJ2ZXIudXBkYXRlKHRoaXMpKTtcclxuXHR9O1xyXG59XHJcblxyXG5jbGFzcyBUaW1lclZpZXcgaW1wbGVtZW50cyBPYnNlcnZlciB7XHJcblx0cHJpdmF0ZSB0aW1lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0aW1lUHJvZ3Jlc3NCYXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgdGltZXJUaW1lOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHRpbWVyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYnV0dG9uT25DbGljazogKGU6IEV2ZW50KSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLnRpbWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWVyJyk7XHJcblx0XHR0aGlzLnRpbWVQcm9ncmVzc0JhciA9IHRoaXMudGltZXIucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLWJhcicpO1xyXG5cdFx0dGhpcy50aW1lclRpbWUgPSB0aGlzLnRpbWVyLnF1ZXJ5U2VsZWN0b3IoJyN0aW1lci10aW1lJyk7XHJcblx0XHR0aGlzLnRpbWVyQnV0dG9uID0gdGhpcy50aW1lci5xdWVyeVNlbGVjdG9yKCcjdGltZXItYnV0dG9uJyk7XHJcblx0XHR0aGlzLnRpbWVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYnV0dG9uT25DbGljayk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGUgPSAob2JzZXJ2YWJsZTogT2JzZXJ2YWJsZSk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3Qgb2JzOiBUaW1lciA9IG9ic2VydmFibGUgYXMgVGltZXI7XHJcblx0XHR0aGlzLnVwZGF0ZVRpbWUob2JzLmdldEN1cnJlbnRUaW1lKCkpO1xyXG5cdFx0dGhpcy51cGRhdGVQcm9ncmVzc0JhcihvYnMuZ2V0Q3VycmVudFRpbWUoKSwgb2JzLmdldFRpbWUoKSk7XHJcblxyXG5cdFx0aWYgKG9icy5nZXRTdGF0ZSgpID09PSAnRU5EJykge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvbkxhYmVsKCdyZXN0YXJ0Jyk7XHJcblx0XHRcdHRoaXMucmVzZXRQcm9ncmVzc0JhcigpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHVwZGF0ZUJ1dHRvbkxhYmVsID0gKGxhYmVsOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZXJCdXR0b24uaW5uZXJUZXh0ID0gbGFiZWw7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlVGltZSA9ICh0aW1lOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZXJUaW1lLmlubmVySFRNTCA9IGZvcm1hdFRpbWUodGltZSk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlUHJvZ3Jlc3NCYXIgPSAoY3VycmVudDogbnVtYmVyLCBiYXNlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IGNpcmN1bWZlcmVuY2U6IG51bWJlciA9IE51bWJlcihnZXRDb21wdXRlZFN0eWxlKHRoaXMudGltZVByb2dyZXNzQmFyKS5nZXRQcm9wZXJ0eVZhbHVlKCctLWNpcmN1bWZlcmVuY2UnKSk7XHJcblx0XHR0aGlzLnRpbWVQcm9ncmVzc0Jhci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wcm9ncmVzcycsICgoMSAtIGN1cnJlbnQgLyBiYXNlKSAqIGNpcmN1bWZlcmVuY2UpLnRvRml4ZWQoMCkpO1xyXG5cdH07XHJcblxyXG5cdHJlc2V0UHJvZ3Jlc3NCYXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVQcm9ncmVzc0Jhci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wcm9ncmVzcycsICcwJyk7XHJcblx0fTtcclxufVxyXG5cclxuY2xhc3MgVGltZXJDb250cm9sbGVyIHtcclxuXHRwcml2YXRlIHZpZXc6IFRpbWVyVmlldztcclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHRpbWVyOiBUaW1lcikge1xyXG5cdFx0dGhpcy52aWV3ID0gbmV3IFRpbWVyVmlldyh0aGlzLnRpbWVyQWN0aW9uKTtcclxuXHRcdHRpbWVyLmFkZE9ic2VydmVyKHRoaXMudmlldyk7XHJcblx0XHR0aGlzLnZpZXcudXBkYXRlKHRoaXMudGltZXIpO1xyXG5cdH1cclxuXHJcblx0dGltZXJBY3Rpb24gPSAoKTogdm9pZCA9PiB7XHJcblx0XHRzd2l0Y2ggKHRoaXMudGltZXIuZ2V0U3RhdGUoKSkge1xyXG5cdFx0XHRjYXNlICdJTklUSUFMJzpcclxuXHRcdFx0Y2FzZSAnUEFVU0VEJzpcclxuXHRcdFx0XHR0aGlzLnN0YXJ0VGltZXIoKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnQ09VTlRJTkcnOlxyXG5cdFx0XHRcdHRoaXMucGF1c2VUaW1lcigpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdFTkQnOlxyXG5cdFx0XHRcdHRoaXMucmVzdGFydFRpbWVyKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0c3RhcnRUaW1lciA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZXIuc3RhcnQoKTtcclxuXHRcdHRoaXMudmlldy51cGRhdGVCdXR0b25MYWJlbCgncGF1c2UnKTtcclxuXHR9O1xyXG5cclxuXHRwYXVzZVRpbWVyID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lci5wYXVzZSgpO1xyXG5cdFx0dGhpcy52aWV3LnVwZGF0ZUJ1dHRvbkxhYmVsKCdzdGFydCcpO1xyXG5cdH07XHJcblxyXG5cdHJlc3RhcnRUaW1lciA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZXIucmVzdGFydCgpO1xyXG5cdFx0dGhpcy52aWV3LnVwZGF0ZUJ1dHRvbkxhYmVsKCdzdGFydCcpO1xyXG5cdH07XHJcblxyXG5cdHNldFRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVyLnNldFRpbWUodGltZSk7XHJcblx0fTtcclxufVxyXG4vKiBUaW1lciBmdW5jdGlvbmFsaXR5IGVuZCAqL1xyXG5cclxuLyogQXBwICovXHJcbnR5cGUgUG9tb2Rvcm9BcHBTdGF0ZXMgPSAnUE9NT0RPUk8nIHwgJ1NIT1JUX0JSRUFLJyB8ICdMT05HX0JSRUFLJztcclxuY2xhc3MgUG9tb2Rvcm9BcHAge1xyXG5cdHByaXZhdGUgdGltZXI6IFRpbWVyQ29udHJvbGxlcjtcclxuXHRwcml2YXRlIGFwcFN0YXRlOiBQb21vZG9yb0FwcFN0YXRlcyA9ICdQT01PRE9STyc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSBwb21vZG9yb1RpbWU6IG51bWJlciA9IERFRkFVTFRfUE9NT0RPUk9fVElNRSxcclxuXHRcdHByaXZhdGUgc2hvcnRCcmVha1RpbWU6IG51bWJlciA9IERFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSxcclxuXHRcdHByaXZhdGUgbG9uZ0JyZWFrVGltZTogbnVtYmVyID0gREVGQVVMVF9MT05HX0JSRUFLX1RJTUVcclxuXHQpIHtcclxuXHRcdHRoaXMudGltZXIgPSBuZXcgVGltZXJDb250cm9sbGVyKG5ldyBQb21vZG9yb1RpbWVyKG1pbnV0ZXNUb1NlY29uZHModGhpcy5wb21vZG9yb1RpbWUpKSk7XHJcblx0fVxyXG5cclxuXHRzZXRUaW1lcyA9IChwb21vZG9ybzogbnVtYmVyLCBzaG9ydEJyZWFrOiBudW1iZXIsIGxvbmdCcmVhazogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnBvbW9kb3JvVGltZSA9IHBvbW9kb3JvO1xyXG5cdFx0dGhpcy5zaG9ydEJyZWFrVGltZSA9IHNob3J0QnJlYWs7XHJcblx0XHR0aGlzLmxvbmdCcmVha1RpbWUgPSBsb25nQnJlYWs7XHJcblx0XHR0aGlzLmNoYW5nZVN0YXRlKHRoaXMuYXBwU3RhdGUpO1xyXG5cdH07XHJcblxyXG5cdGNoYW5nZVN0YXRlID0gKHN0YXRlOiBQb21vZG9yb0FwcFN0YXRlcyk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5hcHBTdGF0ZSA9IHN0YXRlO1xyXG5cdFx0dGhpcy50aW1lci5yZXN0YXJ0VGltZXIoKTtcclxuXHRcdHRoaXMuc2V0VGltZXJCYXNlZE9uU3RhdGUoKTtcclxuXHR9O1xyXG5cclxuXHRzZXRUaW1lckJhc2VkT25TdGF0ZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHN3aXRjaCAodGhpcy5hcHBTdGF0ZSkge1xyXG5cdFx0XHRjYXNlICdQT01PRE9STyc6XHJcblx0XHRcdFx0dGhpcy50aW1lci5zZXRUaW1lKG1pbnV0ZXNUb1NlY29uZHModGhpcy5wb21vZG9yb1RpbWUpKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnU0hPUlRfQlJFQUsnOlxyXG5cdFx0XHRcdHRoaXMudGltZXIuc2V0VGltZShtaW51dGVzVG9TZWNvbmRzKHRoaXMuc2hvcnRCcmVha1RpbWUpKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnTE9OR19CUkVBSyc6XHJcblx0XHRcdFx0dGhpcy50aW1lci5zZXRUaW1lKG1pbnV0ZXNUb1NlY29uZHModGhpcy5sb25nQnJlYWtUaW1lKSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuY29uc3QgcG9tb2Rvcm9BcHA6IFBvbW9kb3JvQXBwID0gbmV3IFBvbW9kb3JvQXBwKCk7XHJcblxyXG4vKiBldmVudCBsaXN0ZW5lcnMgKi9cclxuc2V0dGluZ3NTdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogRXZlbnQpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdGNvbnN0IHBvbW9kb3JvVGltZSA9IE51bWJlcihwb21vZG9yb1RpbWVJbnB1dC52YWx1ZSk7XHJcblx0Y29uc3Qgc2hvcnRCcmVha1RpbWUgPSBOdW1iZXIoc2hvcnRCcmVha1RpbWVJbnB1dC52YWx1ZSk7XHJcblx0Y29uc3QgbG9uZ0JyZWFrVGltZSA9IE51bWJlcihsb25nQnJlYWtUaW1lSW5wdXQudmFsdWUpO1xyXG5cdGNvbnN0IGNob3NlbkZvbnQ6IEZvbnQgPSBmb250UmFkaW9CdXR0b25zLmZpbmQoYnV0dG9uID0+IGJ1dHRvbi5jaGVja2VkKS52YWx1ZSBhcyBGb250O1xyXG5cdGNvbnN0IGNob3NlbkNvbG91cjogQ29sb3VyID0gY29sb3VyUmFkaW9CdXR0b25zLmZpbmQoYnV0dG9uID0+IGJ1dHRvbi5jaGVja2VkKS52YWx1ZSBhcyBDb2xvdXI7XHJcblxyXG5cdHBvbW9kb3JvQXBwLnNldFRpbWVzKHBvbW9kb3JvVGltZSwgc2hvcnRCcmVha1RpbWUsIGxvbmdCcmVha1RpbWUpO1xyXG5cdGFwcFRoZW1lLnVwZGF0ZVRoZW1lKGNob3NlbkZvbnQsIGNob3NlbkNvbG91cik7XHJcblx0Y2xvc2VNb2RhbCgpO1xyXG59KTtcclxuXHJcbnNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdG9wZW5Nb2RhbCgpO1xyXG59KTtcclxuXHJcbmNsb3NlTW9kYWxCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNsb3NlTW9kYWwoKTtcclxufSk7XHJcblxyXG50aW1lU3RhdGVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+XHJcblx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IEV2ZW50KSA9PiB7XHJcblx0XHRjb25zdCBidXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZS50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBzdGF0ZTogUG9tb2Rvcm9BcHBTdGF0ZXMgPSBidXR0b24uZGF0YXNldC5zdGF0ZS50b1VwcGVyQ2FzZSgpIGFzIFBvbW9kb3JvQXBwU3RhdGVzO1xyXG5cdFx0YWN0aXZhdGVTdGF0ZUJ1dHRvbihidXR0b24pO1xyXG5cdFx0cG9tb2Rvcm9BcHAuY2hhbmdlU3RhdGUoc3RhdGUpO1xyXG5cdH0pXHJcbik7XHJcblxyXG4vKiBoZWxwZXIgZnVuY3Rpb25zICovXHJcbi8qIC0tLSB0aW1lciAqL1xyXG5mdW5jdGlvbiBtaW51dGVzVG9TZWNvbmRzKG1pbnV0ZXM6IG51bWJlcik6IG51bWJlciB7XHJcblx0cmV0dXJuIG1pbnV0ZXMgKiBTRUNPTkRTX0lOX01JTlVURTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TWludXRlc0Zyb21TZWNvbmRzKHNlY29uZHM6IG51bWJlcik6IG51bWJlciB7XHJcblx0cmV0dXJuIE1hdGguZmxvb3Ioc2Vjb25kcyAvIFNFQ09ORFNfSU5fTUlOVVRFKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmVtYWluaW5nU2Vjb25kcyhzZWNvbmRzOiBudW1iZXIpOiBudW1iZXIge1xyXG5cdHJldHVybiBzZWNvbmRzICUgU0VDT05EU19JTl9NSU5VVEU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExlYWRpbmdaZXJvKHRpbWU6IG51bWJlcik6IHN0cmluZyB7XHJcblx0cmV0dXJuIHRpbWUgPCAxMCA/IGAwJHt0aW1lfWAgOiB0aW1lLnRvU3RyaW5nKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFRpbWUoc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcclxuXHRjb25zdCBtaW51dGVzID0gZ2V0TWludXRlc0Zyb21TZWNvbmRzKHNlY29uZHMpO1xyXG5cdGNvbnN0IHJlbWFpbmluZ1NlY29uZHMgPSBnZXRSZW1haW5pbmdTZWNvbmRzKHNlY29uZHMpO1xyXG5cdHJldHVybiBhZGRMZWFkaW5nWmVybyhtaW51dGVzKSArICc6JyArIGFkZExlYWRpbmdaZXJvKHJlbWFpbmluZ1NlY29uZHMpO1xyXG59XHJcblxyXG4vKiAtLS0gYXBwIHRpbWUgc3RhdGUgYnV0dG9ucyBmdW5jdGlvbiAqL1xyXG5mdW5jdGlvbiBhY3RpdmF0ZVN0YXRlQnV0dG9uKGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQpIHtcclxuXHR0aW1lU3RhdGVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XHJcblx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG59XHJcblxyXG4vKiAtLS0gbW9kYWwgKi9cclxuZnVuY3Rpb24gb3Blbk1vZGFsKCkge1xyXG5cdHNldHRpbmdzTW9kYWwuZGF0YXNldC5vcGVuID0gJ3RydWUnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xyXG5cdHNldHRpbmdzTW9kYWwuZGF0YXNldC5vcGVuID0gJ2ZhbHNlJztcclxufVxyXG4iXX0=
