"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var settingsButton=document.querySelector("#settings-button"),settingsModal=document.querySelector("#settings-modal"),closeModalButton=document.querySelector("#close-settings-modal-button"),settingsForm=settingsModal.querySelector("#settings-form"),pomodoroTimeInput=settingsForm.querySelector("#pomodoro-time"),shortBreakTimeInput=settingsForm.querySelector("#short-break-time"),longBreakTimeInput=settingsForm.querySelector("#long-break-time"),fontRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="font"]')),colourRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="colour"]')),settingsSubmit=settingsForm.querySelector('button[type="submit"]'),timeStateButtons=Array.from(document.querySelectorAll(".state-button")),SECONDS_IN_MINUTE=60,DEFAULT_FONT="sans-serif",DEFAULT_COLOUR="red",DEFAULT_POMODORO_TIME=25,DEFAULT_SHORT_BREAK_TIME=5,DEFAULT_LONG_BREAK_TIME=15,AppTheme=_createClass(function t(){var o=this;_classCallCheck(this,t),this.colour=DEFAULT_COLOUR,this.font=DEFAULT_FONT,this.updateTheme=function(t,e){o.colour=e,o.font=t,document.body.dataset.font=t,document.body.dataset.theme=e}}),appTheme=new AppTheme,minutesToSeconds=function(t){return t*SECONDS_IN_MINUTE},getMinutesFromSeconds=function(t){return Math.floor(t/SECONDS_IN_MINUTE)},getRemainingSeconds=function(t){return t%SECONDS_IN_MINUTE},addLeadingZero=function(t){return t<10?"0".concat(t):t.toString()},formatTime=function(t){var e=getMinutesFromSeconds(t),t=getRemainingSeconds(t);return addLeadingZero(e)+":"+addLeadingZero(t)},PomodoroTimer=_createClass(function t(){var e=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,t),this.time=o,this.observers=[],this.state="INITIAL",this.start=function(){e.state="COUNTING",e.count()},this.count=function(){e.countTimeout=setTimeout(function(){e.updateTime(e.getCurrentTime()-1),e.count()},1e3)},this.pause=function(){e.state="PAUSED",clearTimeout(e.countTimeout)},this.restart=function(){e.state="INITIAL",e.countingTime=e.time,clearTimeout(e.countTimeout)},this.getTime=function(){return e.time},this.getCurrentTime=function(){return e.countingTime},this.setTime=function(t){e.time=t,e.updateTime(e.time)},this.updateTime=function(t){e.countingTime=t,e.notifyObservers()},this.getState=function(){return e.state},this.setState=function(t){e.state=t},this.addObserver=function(t){e.observers.push(t)},this.notifyObservers=function(){e.observers.forEach(function(t){return t.update(e.countingTime,e.time)})},this.countingTime=o}),TimerView=_createClass(function t(e){var i=this;_classCallCheck(this,t),this.update=function(t,e){i.updateTime(t),i.updateProgressBar(t,e)},this.updateButtonLabel=function(t){i.timerButton.innerText=t},this.updateTime=function(t){i.timerTime.innerHTML=formatTime(t)},this.updateProgressBar=function(t,e){var o=Number(getComputedStyle(i.timeProgressBar).getPropertyValue("--circumference"));i.timeProgressBar.style.setProperty("--progress",((1-t/e)*o).toFixed(0))},this.timer=document.querySelector(".timer"),this.timeProgressBar=this.timer.querySelector("#progress-bar"),this.timerTime=this.timer.querySelector("#timer-time"),this.timerButton=this.timer.querySelector("#timer-button"),this.timerButton.addEventListener("click",e)}),TimerController=_createClass(function t(e){var o=this;_classCallCheck(this,t),this.timer=e,this.timerAction=function(){switch(o.timer.getState()){case"INITIAL":case"PAUSED":o.timer.start(),o.view.updateButtonLabel("pause");break;case"COUNTING":o.timer.pause(),o.view.updateButtonLabel("start")}},this.restartTimer=function(){o.timer.restart(),o.view.updateButtonLabel("start")},this.setTime=function(t){o.timer.setTime(t)},this.view=new TimerView(this.timerAction),e.addObserver(this.view),this.view.update(this.timer.getTime(),this.timer.getTime())}),PomodoroApp=_createClass(function t(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_POMODORO_TIME,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:DEFAULT_SHORT_BREAK_TIME,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:DEFAULT_LONG_BREAK_TIME;_classCallCheck(this,t),this.pomodoroTime=e,this.shortBreakTime=o,this.longBreakTime=r,this.appState="POMODORO",this.setTimes=function(t,e,o){i.pomodoroTime=t,i.shortBreakTime=e,i.longBreakTime=o,i.changeState(i.appState)},this.changeState=function(t){i.appState=t,i.timer.restartTimer(),i.setTimerBasedOnState()},this.setTimerBasedOnState=function(){switch(i.appState){case"POMODORO":i.timer.setTime(minutesToSeconds(i.pomodoroTime));break;case"SHORT_BREAK":i.timer.setTime(minutesToSeconds(i.shortBreakTime));break;case"LONG_BREAK":i.timer.setTime(minutesToSeconds(i.longBreakTime))}},this.timer=new TimerController(new PomodoroTimer(minutesToSeconds(this.pomodoroTime)))}),pomodoroApp=new PomodoroApp,openModal=function(){settingsModal.dataset.open="true"},closeModal=function(){settingsModal.dataset.open="false"},activateStateButton=function(t){timeStateButtons.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active")};settingsSubmit.addEventListener("click",function(t){t.preventDefault();var t=Number(pomodoroTimeInput.value),e=Number(shortBreakTimeInput.value),o=Number(longBreakTimeInput.value),i=fontRadioButtons.find(function(t){return t.checked}).value,r=colourRadioButtons.find(function(t){return t.checked}).value;pomodoroApp.setTimes(t,e,o),appTheme.updateTheme(i,r),closeModal()}),settingsButton.addEventListener("click",function(){openModal()}),null!=closeModalButton&&closeModalButton.addEventListener("click",function(){closeModal()}),timeStateButtons.forEach(function(t){return t.addEventListener("click",function(t){var t=t.target,e=t.dataset.state.toUpperCase();activateStateButton(t),pomodoroApp.changeState(e)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsic2V0dGluZ3NCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXR0aW5nc01vZGFsIiwiY2xvc2VNb2RhbEJ1dHRvbiIsInNldHRpbmdzRm9ybSIsInBvbW9kb3JvVGltZUlucHV0Iiwic2hvcnRCcmVha1RpbWVJbnB1dCIsImxvbmdCcmVha1RpbWVJbnB1dCIsImZvbnRSYWRpb0J1dHRvbnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sb3VyUmFkaW9CdXR0b25zIiwic2V0dGluZ3NTdWJtaXQiLCJ0aW1lU3RhdGVCdXR0b25zIiwiU0VDT05EU19JTl9NSU5VVEUiLCJERUZBVUxUX0ZPTlQiLCJERUZBVUxUX0NPTE9VUiIsIkRFRkFVTFRfUE9NT0RPUk9fVElNRSIsIkRFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSIsIkRFRkFVTFRfTE9OR19CUkVBS19USU1FIiwiQXBwVGhlbWUiLCJfY3JlYXRlQ2xhc3MiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJjb2xvdXIiLCJmb250IiwidXBkYXRlVGhlbWUiLCJib2R5IiwiZGF0YXNldCIsInRoZW1lIiwiYXBwVGhlbWUiLCJtaW51dGVzVG9TZWNvbmRzIiwibWludXRlcyIsImdldE1pbnV0ZXNGcm9tU2Vjb25kcyIsInNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJnZXRSZW1haW5pbmdTZWNvbmRzIiwiYWRkTGVhZGluZ1plcm8iLCJ0aW1lIiwiY29uY2F0IiwidG9TdHJpbmciLCJmb3JtYXRUaW1lIiwicmVtYWluaW5nU2Vjb25kcyIsIlBvbW9kb3JvVGltZXIiLCJfdGhpczIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJvYnNlcnZlcnMiLCJzdGF0ZSIsInN0YXJ0IiwiY291bnQiLCJjb3VudFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidXBkYXRlVGltZSIsImdldEN1cnJlbnRUaW1lIiwicGF1c2UiLCJjbGVhclRpbWVvdXQiLCJyZXN0YXJ0IiwiY291bnRpbmdUaW1lIiwiZ2V0VGltZSIsInNldFRpbWUiLCJub3RpZnlPYnNlcnZlcnMiLCJnZXRTdGF0ZSIsInNldFN0YXRlIiwiYWRkT2JzZXJ2ZXIiLCJvYnNlcnZlciIsInB1c2giLCJmb3JFYWNoIiwidXBkYXRlIiwiVGltZXJWaWV3IiwiYnV0dG9uT25DbGljayIsIl90aGlzMyIsImN1cnJlbnQiLCJiYXNlIiwidXBkYXRlUHJvZ3Jlc3NCYXIiLCJ1cGRhdGVCdXR0b25MYWJlbCIsImxhYmVsIiwidGltZXJCdXR0b24iLCJpbm5lclRleHQiLCJ0aW1lclRpbWUiLCJpbm5lckhUTUwiLCJjaXJjdW1mZXJlbmNlIiwiTnVtYmVyIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInRpbWVQcm9ncmVzc0JhciIsImdldFByb3BlcnR5VmFsdWUiLCJzdHlsZSIsInNldFByb3BlcnR5IiwidG9GaXhlZCIsInRpbWVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlRpbWVyQ29udHJvbGxlciIsIl90aGlzNCIsInRpbWVyQWN0aW9uIiwidmlldyIsInJlc3RhcnRUaW1lciIsIlBvbW9kb3JvQXBwIiwiX3RoaXM1IiwicG9tb2Rvcm9UaW1lIiwic2hvcnRCcmVha1RpbWUiLCJsb25nQnJlYWtUaW1lIiwiYXBwU3RhdGUiLCJzZXRUaW1lcyIsInBvbW9kb3JvIiwic2hvcnRCcmVhayIsImxvbmdCcmVhayIsImNoYW5nZVN0YXRlIiwic2V0VGltZXJCYXNlZE9uU3RhdGUiLCJwb21vZG9yb0FwcCIsIm9wZW5Nb2RhbCIsIm9wZW4iLCJjbG9zZU1vZGFsIiwiYWN0aXZhdGVTdGF0ZUJ1dHRvbiIsImJ1dHRvbiIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwiY2hvc2VuRm9udCIsImZpbmQiLCJjaGVja2VkIiwiY2hvc2VuQ29sb3VyIiwidGFyZ2V0IiwidG9VcHBlckNhc2UiXSwibWFwcGluZ3MiOiIyakNBQ0EsSUFBTUEs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QSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIG1vZGFsIGFuZCBtb2RhbCByZWFsdGVkIGVsZW1lbnRzICovXHJcbmNvbnN0IHNldHRpbmdzQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXR0aW5ncy1idXR0b24nKTtcclxuY29uc3Qgc2V0dGluZ3NNb2RhbDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2V0dGluZ3MtbW9kYWwnKTtcclxuY29uc3QgY2xvc2VNb2RhbEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2xvc2Utc2V0dGluZ3MtbW9kYWwtYnV0dG9uJyk7XHJcblxyXG4vKiBzZXR0aW5ncyBmb3JtIGVsZW1lbnRzICovXHJcbmNvbnN0IHNldHRpbmdzRm9ybTogSFRNTEZvcm1FbGVtZW50ID0gc2V0dGluZ3NNb2RhbC5xdWVyeVNlbGVjdG9yKCcjc2V0dGluZ3MtZm9ybScpO1xyXG5jb25zdCBwb21vZG9yb1RpbWVJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yKCcjcG9tb2Rvcm8tdGltZScpO1xyXG5jb25zdCBzaG9ydEJyZWFrVGltZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gc2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNzaG9ydC1icmVhay10aW1lJyk7XHJcbmNvbnN0IGxvbmdCcmVha1RpbWVJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yKCcjbG9uZy1icmVhay10aW1lJyk7XHJcbmNvbnN0IGZvbnRSYWRpb0J1dHRvbnM6IEFycmF5PEhUTUxJbnB1dEVsZW1lbnQ+ID0gQXJyYXkuZnJvbShcclxuXHRzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCJmb250XCJdJylcclxuKTtcclxuY29uc3QgY29sb3VyUmFkaW9CdXR0b25zOiBBcnJheTxIVE1MSW5wdXRFbGVtZW50PiA9IEFycmF5LmZyb20oXHJcblx0c2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiY29sb3VyXCJdJylcclxuKTtcclxuY29uc3Qgc2V0dGluZ3NTdWJtaXQ6IEhUTUxCdXR0b25FbGVtZW50ID0gc2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcblxyXG4vKiB0aW1lIHN0YXRlIGJ1dHRvbnMgKi9cclxuY29uc3QgdGltZVN0YXRlQnV0dG9uczogQXJyYXk8SFRNTEJ1dHRvbkVsZW1lbnQ+ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhdGUtYnV0dG9uJykpO1xyXG5cclxuLyogY29uc3RhbnRzICovXHJcbi8qIC0tLSBnZW5lcmFsICovXHJcbmNvbnN0IFNFQ09ORFNfSU5fTUlOVVRFOiBudW1iZXIgPSA2MDtcclxuLyogLS0tIHRoZW1lICovXHJcbmNvbnN0IERFRkFVTFRfRk9OVDogRm9udCA9ICdzYW5zLXNlcmlmJztcclxuY29uc3QgREVGQVVMVF9DT0xPVVI6IENvbG91ciA9ICdyZWQnO1xyXG4vKiAtLS0gdGltZXMgKi9cclxuY29uc3QgREVGQVVMVF9QT01PRE9ST19USU1FOiBudW1iZXIgPSAyNTtcclxuY29uc3QgREVGQVVMVF9TSE9SVF9CUkVBS19USU1FOiBudW1iZXIgPSA1O1xyXG5jb25zdCBERUZBVUxUX0xPTkdfQlJFQUtfVElNRTogbnVtYmVyID0gMTU7XHJcblxyXG4vKiBPYnNlcnZlciBwYXR0ZXJuIGludGVyZmFjZXMgKi9cclxuaW50ZXJmYWNlIE9ic2VydmFibGU8VD4ge1xyXG5cdGFkZE9ic2VydmVyOiAob2JzZXJ2ZXI6IE9ic2VydmVyPFQ+KSA9PiB2b2lkO1xyXG5cdG5vdGlmeU9ic2VydmVyczogKCkgPT4gdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIE9ic2VydmVyPFQ+IHtcclxuXHR1cGRhdGU6IChjdXJyZW50OiBULCBiYXNlOiBUKSA9PiB2b2lkO1xyXG59XHJcblxyXG4vKiB0aGVtZSBzdGF0ZXMgKi9cclxudHlwZSBDb2xvdXIgPSAncmVkJyB8ICdjeWFuJyB8ICd2aW9sZXQnO1xyXG50eXBlIEZvbnQgPSAnc2VyaWYnIHwgJ3NhbnMtc2VyaWYnIHwgJ21vbm9zcGFjZSc7XHJcbmludGVyZmFjZSBUaGVtZSB7XHJcblx0Y29sb3VyOiBDb2xvdXI7XHJcblx0Zm9udDogRm9udDtcclxuXHR1cGRhdGVUaGVtZTogKGZvbnQ6IEZvbnQsIGNvbG91cjogQ29sb3VyKSA9PiB2b2lkO1xyXG59XHJcblxyXG5jbGFzcyBBcHBUaGVtZSBpbXBsZW1lbnRzIFRoZW1lIHtcclxuXHRjb2xvdXI6IENvbG91ciA9IERFRkFVTFRfQ09MT1VSO1xyXG5cdGZvbnQ6IEZvbnQgPSBERUZBVUxUX0ZPTlQ7XHJcblxyXG5cdHVwZGF0ZVRoZW1lID0gKGZvbnQ6IEZvbnQsIGNvbG91cjogQ29sb3VyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmNvbG91ciA9IGNvbG91cjtcclxuXHRcdHRoaXMuZm9udCA9IGZvbnQ7XHJcblx0XHRkb2N1bWVudC5ib2R5LmRhdGFzZXQuZm9udCA9IGZvbnQ7XHJcblx0XHRkb2N1bWVudC5ib2R5LmRhdGFzZXQudGhlbWUgPSBjb2xvdXI7XHJcblx0fTtcclxufVxyXG5cclxuY29uc3QgYXBwVGhlbWU6IFRoZW1lID0gbmV3IEFwcFRoZW1lKCk7XHJcblxyXG4vKiBUaW1lciBmdW5jdGlvbmFsaXR5ICovXHJcbnR5cGUgVGltZXJTdGF0ZSA9ICdJTklUSUFMJyB8ICdDT1VOVElORycgfCAnUEFVU0VEJyB8ICdFTkQnO1xyXG5cclxuY29uc3QgbWludXRlc1RvU2Vjb25kcyA9IChtaW51dGVzOiBudW1iZXIpOiBudW1iZXIgPT4gbWludXRlcyAqIFNFQ09ORFNfSU5fTUlOVVRFO1xyXG5cclxuY29uc3QgZ2V0TWludXRlc0Zyb21TZWNvbmRzID0gKHNlY29uZHM6IG51bWJlcik6IG51bWJlciA9PiBNYXRoLmZsb29yKHNlY29uZHMgLyBTRUNPTkRTX0lOX01JTlVURSk7XHJcblxyXG5jb25zdCBnZXRSZW1haW5pbmdTZWNvbmRzID0gKHNlY29uZHM6IG51bWJlcik6IG51bWJlciA9PiBzZWNvbmRzICUgU0VDT05EU19JTl9NSU5VVEU7XHJcblxyXG5jb25zdCBhZGRMZWFkaW5nWmVybyA9ICh0aW1lOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG5cdHJldHVybiB0aW1lIDwgMTAgPyBgMCR7dGltZX1gIDogdGltZS50b1N0cmluZygpO1xyXG59O1xyXG5cclxuY29uc3QgZm9ybWF0VGltZSA9IChzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG5cdGNvbnN0IG1pbnV0ZXMgPSBnZXRNaW51dGVzRnJvbVNlY29uZHMoc2Vjb25kcyk7XHJcblx0Y29uc3QgcmVtYWluaW5nU2Vjb25kcyA9IGdldFJlbWFpbmluZ1NlY29uZHMoc2Vjb25kcyk7XHJcblx0cmV0dXJuIGFkZExlYWRpbmdaZXJvKG1pbnV0ZXMpICsgJzonICsgYWRkTGVhZGluZ1plcm8ocmVtYWluaW5nU2Vjb25kcyk7XHJcbn07XHJcblxyXG5pbnRlcmZhY2UgVGltZXIgZXh0ZW5kcyBPYnNlcnZhYmxlPG51bWJlcj4ge1xyXG5cdHN0YXRlOiBUaW1lclN0YXRlO1xyXG5cdHN0YXJ0OiAoKSA9PiB2b2lkO1xyXG5cdHBhdXNlOiAoKSA9PiB2b2lkO1xyXG5cdHJlc3RhcnQ6ICgpID0+IHZvaWQ7XHJcblx0c2V0VGltZTogKHRpbWU6IG51bWJlcikgPT4gdm9pZDtcclxuXHRnZXRUaW1lOiAoKSA9PiBudW1iZXI7XHJcblx0Z2V0U3RhdGU6ICgpID0+IFRpbWVyU3RhdGU7XHJcblx0c2V0U3RhdGU6IChzdGF0ZTogVGltZXJTdGF0ZSkgPT4gdm9pZDtcclxufVxyXG5cclxuY2xhc3MgUG9tb2Rvcm9UaW1lciBpbXBsZW1lbnRzIFRpbWVyIHtcclxuXHRvYnNlcnZlcnM6IE9ic2VydmVyPG51bWJlcj5bXSA9IFtdO1xyXG5cdGNvdW50VGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcblx0c3RhdGU6IFRpbWVyU3RhdGUgPSAnSU5JVElBTCc7XHJcblx0cHJpdmF0ZSBjb3VudGluZ1RpbWU6IG51bWJlcjtcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSB0aW1lOiBudW1iZXIgPSAwKSB7XHJcblx0XHR0aGlzLmNvdW50aW5nVGltZSA9IHRpbWU7XHJcblx0fVxyXG5cclxuXHRzdGFydCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc3RhdGUgPSAnQ09VTlRJTkcnO1xyXG5cdFx0dGhpcy5jb3VudCgpO1xyXG5cdH07XHJcblxyXG5cdGNvdW50ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5jb3VudFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVUaW1lKHRoaXMuZ2V0Q3VycmVudFRpbWUoKSAtIDEpO1xyXG5cdFx0XHR0aGlzLmNvdW50KCk7XHJcblx0XHR9LCAxMDAwKTtcclxuXHR9O1xyXG5cclxuXHRwYXVzZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc3RhdGUgPSAnUEFVU0VEJztcclxuXHRcdGNsZWFyVGltZW91dCh0aGlzLmNvdW50VGltZW91dCk7XHJcblx0fTtcclxuXHJcblx0cmVzdGFydCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc3RhdGUgPSAnSU5JVElBTCc7XHJcblx0XHR0aGlzLmNvdW50aW5nVGltZSA9IHRoaXMudGltZTtcclxuXHRcdGNsZWFyVGltZW91dCh0aGlzLmNvdW50VGltZW91dCk7XHJcblx0fTtcclxuXHJcblx0Z2V0VGltZSA9ICgpOiBudW1iZXIgPT4gdGhpcy50aW1lO1xyXG5cclxuXHRnZXRDdXJyZW50VGltZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5jb3VudGluZ1RpbWU7XHJcblxyXG5cdHNldFRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWUgPSB0aW1lO1xyXG5cdFx0dGhpcy51cGRhdGVUaW1lKHRoaXMudGltZSk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlVGltZSA9ICh0aW1lOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuY291bnRpbmdUaW1lID0gdGltZTtcclxuXHRcdHRoaXMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcblx0fTtcclxuXHJcblx0Z2V0U3RhdGUgPSAoKTogVGltZXJTdGF0ZSA9PiB0aGlzLnN0YXRlO1xyXG5cclxuXHRzZXRTdGF0ZSA9IChzdGF0ZTogVGltZXJTdGF0ZSk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdH07XHJcblxyXG5cdGFkZE9ic2VydmVyID0gKG9ic2VydmVyOiBPYnNlcnZlcjxudW1iZXI+KTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuXHR9O1xyXG5cclxuXHRub3RpZnlPYnNlcnZlcnMgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IG9ic2VydmVyLnVwZGF0ZSh0aGlzLmNvdW50aW5nVGltZSwgdGhpcy50aW1lKSk7XHJcblx0fTtcclxufVxyXG5cclxuY2xhc3MgVGltZXJWaWV3IGltcGxlbWVudHMgT2JzZXJ2ZXI8bnVtYmVyPiB7XHJcblx0cHJpdmF0ZSB0aW1lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0aW1lUHJvZ3Jlc3NCYXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgdGltZXJUaW1lOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHRpbWVyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYnV0dG9uT25DbGljazogKGU6IEV2ZW50KSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLnRpbWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWVyJyk7XHJcblx0XHR0aGlzLnRpbWVQcm9ncmVzc0JhciA9IHRoaXMudGltZXIucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLWJhcicpO1xyXG5cdFx0dGhpcy50aW1lclRpbWUgPSB0aGlzLnRpbWVyLnF1ZXJ5U2VsZWN0b3IoJyN0aW1lci10aW1lJyk7XHJcblx0XHR0aGlzLnRpbWVyQnV0dG9uID0gdGhpcy50aW1lci5xdWVyeVNlbGVjdG9yKCcjdGltZXItYnV0dG9uJyk7XHJcblx0XHR0aGlzLnRpbWVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYnV0dG9uT25DbGljayk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGUgPSAoY3VycmVudDogbnVtYmVyLCBiYXNlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudXBkYXRlVGltZShjdXJyZW50KTtcclxuXHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3NCYXIoY3VycmVudCwgYmFzZSk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlQnV0dG9uTGFiZWwgPSAobGFiZWw6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lckJ1dHRvbi5pbm5lclRleHQgPSBsYWJlbDtcclxuXHR9O1xyXG5cclxuXHR1cGRhdGVUaW1lID0gKHRpbWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lclRpbWUuaW5uZXJIVE1MID0gZm9ybWF0VGltZSh0aW1lKTtcclxuXHR9O1xyXG5cclxuXHR1cGRhdGVQcm9ncmVzc0JhciA9IChjdXJyZW50OiBudW1iZXIsIGJhc2U6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgY2lyY3VtZmVyZW5jZTogbnVtYmVyID0gTnVtYmVyKGdldENvbXB1dGVkU3R5bGUodGhpcy50aW1lUHJvZ3Jlc3NCYXIpLmdldFByb3BlcnR5VmFsdWUoJy0tY2lyY3VtZmVyZW5jZScpKTtcclxuXHRcdHRoaXMudGltZVByb2dyZXNzQmFyLnN0eWxlLnNldFByb3BlcnR5KCctLXByb2dyZXNzJywgKCgxIC0gY3VycmVudCAvIGJhc2UpICogY2lyY3VtZmVyZW5jZSkudG9GaXhlZCgwKSk7XHJcblx0fTtcclxufVxyXG5cclxuY2xhc3MgVGltZXJDb250cm9sbGVyIHtcclxuXHRwcml2YXRlIHZpZXc6IFRpbWVyVmlldztcclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHRpbWVyOiBUaW1lcikge1xyXG5cdFx0dGhpcy52aWV3ID0gbmV3IFRpbWVyVmlldyh0aGlzLnRpbWVyQWN0aW9uKTtcclxuXHRcdHRpbWVyLmFkZE9ic2VydmVyKHRoaXMudmlldyk7XHJcblx0XHR0aGlzLnZpZXcudXBkYXRlKHRoaXMudGltZXIuZ2V0VGltZSgpLCB0aGlzLnRpbWVyLmdldFRpbWUoKSk7XHJcblx0fVxyXG5cclxuXHR0aW1lckFjdGlvbiA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHN3aXRjaCAodGhpcy50aW1lci5nZXRTdGF0ZSgpKSB7XHJcblx0XHRcdGNhc2UgJ0lOSVRJQUwnOlxyXG5cdFx0XHRjYXNlICdQQVVTRUQnOlxyXG5cdFx0XHRcdHRoaXMudGltZXIuc3RhcnQoKTtcclxuXHRcdFx0XHR0aGlzLnZpZXcudXBkYXRlQnV0dG9uTGFiZWwoJ3BhdXNlJyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ0NPVU5USU5HJzpcclxuXHRcdFx0XHR0aGlzLnRpbWVyLnBhdXNlKCk7XHJcblx0XHRcdFx0dGhpcy52aWV3LnVwZGF0ZUJ1dHRvbkxhYmVsKCdzdGFydCcpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHJlc3RhcnRUaW1lciA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZXIucmVzdGFydCgpO1xyXG5cdFx0dGhpcy52aWV3LnVwZGF0ZUJ1dHRvbkxhYmVsKCdzdGFydCcpO1xyXG5cdH07XHJcblxyXG5cdHNldFRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVyLnNldFRpbWUodGltZSk7XHJcblx0fTtcclxufVxyXG4vKiBUaW1lciBmdW5jdGlvbmFsaXR5IGVuZCAqL1xyXG5cclxuLyogQXBwICovXHJcbnR5cGUgUG9tb2Rvcm9BcHBTdGF0ZXMgPSAnUE9NT0RPUk8nIHwgJ1NIT1JUX0JSRUFLJyB8ICdMT05HX0JSRUFLJztcclxuY2xhc3MgUG9tb2Rvcm9BcHAge1xyXG5cdHByaXZhdGUgdGltZXI6IFRpbWVyQ29udHJvbGxlcjtcclxuXHRwcml2YXRlIGFwcFN0YXRlOiBQb21vZG9yb0FwcFN0YXRlcyA9ICdQT01PRE9STyc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSBwb21vZG9yb1RpbWU6IG51bWJlciA9IERFRkFVTFRfUE9NT0RPUk9fVElNRSxcclxuXHRcdHByaXZhdGUgc2hvcnRCcmVha1RpbWU6IG51bWJlciA9IERFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSxcclxuXHRcdHByaXZhdGUgbG9uZ0JyZWFrVGltZTogbnVtYmVyID0gREVGQVVMVF9MT05HX0JSRUFLX1RJTUVcclxuXHQpIHtcclxuXHRcdHRoaXMudGltZXIgPSBuZXcgVGltZXJDb250cm9sbGVyKG5ldyBQb21vZG9yb1RpbWVyKG1pbnV0ZXNUb1NlY29uZHModGhpcy5wb21vZG9yb1RpbWUpKSk7XHJcblx0fVxyXG5cclxuXHRzZXRUaW1lcyA9IChwb21vZG9ybzogbnVtYmVyLCBzaG9ydEJyZWFrOiBudW1iZXIsIGxvbmdCcmVhazogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnBvbW9kb3JvVGltZSA9IHBvbW9kb3JvO1xyXG5cdFx0dGhpcy5zaG9ydEJyZWFrVGltZSA9IHNob3J0QnJlYWs7XHJcblx0XHR0aGlzLmxvbmdCcmVha1RpbWUgPSBsb25nQnJlYWs7XHJcblx0XHR0aGlzLmNoYW5nZVN0YXRlKHRoaXMuYXBwU3RhdGUpO1xyXG5cdH07XHJcblxyXG5cdGNoYW5nZVN0YXRlID0gKHN0YXRlOiBQb21vZG9yb0FwcFN0YXRlcyk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5hcHBTdGF0ZSA9IHN0YXRlO1xyXG5cdFx0dGhpcy50aW1lci5yZXN0YXJ0VGltZXIoKTtcclxuXHRcdHRoaXMuc2V0VGltZXJCYXNlZE9uU3RhdGUoKTtcclxuXHR9O1xyXG5cclxuXHRzZXRUaW1lckJhc2VkT25TdGF0ZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHN3aXRjaCAodGhpcy5hcHBTdGF0ZSkge1xyXG5cdFx0XHRjYXNlICdQT01PRE9STyc6XHJcblx0XHRcdFx0dGhpcy50aW1lci5zZXRUaW1lKG1pbnV0ZXNUb1NlY29uZHModGhpcy5wb21vZG9yb1RpbWUpKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnU0hPUlRfQlJFQUsnOlxyXG5cdFx0XHRcdHRoaXMudGltZXIuc2V0VGltZShtaW51dGVzVG9TZWNvbmRzKHRoaXMuc2hvcnRCcmVha1RpbWUpKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnTE9OR19CUkVBSyc6XHJcblx0XHRcdFx0dGhpcy50aW1lci5zZXRUaW1lKG1pbnV0ZXNUb1NlY29uZHModGhpcy5sb25nQnJlYWtUaW1lKSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5jb25zdCBwb21vZG9yb0FwcDogUG9tb2Rvcm9BcHAgPSBuZXcgUG9tb2Rvcm9BcHAoKTtcclxuXHJcbi8qIG1vZGFsIGZ1bmN0aW9ucyAqL1xyXG5jb25zdCBvcGVuTW9kYWwgPSAoKSA9PiB7XHJcblx0c2V0dGluZ3NNb2RhbC5kYXRhc2V0Lm9wZW4gPSAndHJ1ZSc7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xyXG5cdHNldHRpbmdzTW9kYWwuZGF0YXNldC5vcGVuID0gJ2ZhbHNlJztcclxufTtcclxuXHJcbi8qIGFwcCB0aW1lIHN0YXRlIGJ1dHRvbnMgZnVuY3Rpb25zICovXHJcbmNvbnN0IGFjdGl2YXRlU3RhdGVCdXR0b24gPSAoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkgPT4ge1xyXG5cdHRpbWVTdGF0ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcclxuXHRidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbn07XHJcblxyXG5zZXR0aW5nc1N1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBFdmVudCkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRjb25zdCBwb21vZG9yb1RpbWUgPSBOdW1iZXIocG9tb2Rvcm9UaW1lSW5wdXQudmFsdWUpO1xyXG5cdGNvbnN0IHNob3J0QnJlYWtUaW1lID0gTnVtYmVyKHNob3J0QnJlYWtUaW1lSW5wdXQudmFsdWUpO1xyXG5cdGNvbnN0IGxvbmdCcmVha1RpbWUgPSBOdW1iZXIobG9uZ0JyZWFrVGltZUlucHV0LnZhbHVlKTtcclxuXHRjb25zdCBjaG9zZW5Gb250OiBGb250ID0gZm9udFJhZGlvQnV0dG9ucy5maW5kKGJ1dHRvbiA9PiBidXR0b24uY2hlY2tlZCkudmFsdWUgYXMgRm9udDtcclxuXHRjb25zdCBjaG9zZW5Db2xvdXI6IENvbG91ciA9IGNvbG91clJhZGlvQnV0dG9ucy5maW5kKGJ1dHRvbiA9PiBidXR0b24uY2hlY2tlZCkudmFsdWUgYXMgQ29sb3VyO1xyXG5cdHBvbW9kb3JvQXBwLnNldFRpbWVzKHBvbW9kb3JvVGltZSwgc2hvcnRCcmVha1RpbWUsIGxvbmdCcmVha1RpbWUpO1xyXG5cdGFwcFRoZW1lLnVwZGF0ZVRoZW1lKGNob3NlbkZvbnQsIGNob3NlbkNvbG91cik7XHJcblx0Y2xvc2VNb2RhbCgpO1xyXG59KTtcclxuXHJcbi8qIG1vZGFsIG9wZW5pbmcgYW5kIGNsb3NpbmcgKi9cclxuc2V0dGluZ3NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0b3Blbk1vZGFsKCk7XHJcbn0pO1xyXG5cclxuY2xvc2VNb2RhbEJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0Y2xvc2VNb2RhbCgpO1xyXG59KTtcclxuLyogbW9kYWwgb3BlbmluZyBhbmQgY2xvc2luZyBlbmQgKi9cclxuXHJcbnRpbWVTdGF0ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT5cclxuXHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogRXZlbnQpID0+IHtcclxuXHRcdGNvbnN0IGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBlLnRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHRcdGNvbnN0IHN0YXRlOiBQb21vZG9yb0FwcFN0YXRlcyA9IGJ1dHRvbi5kYXRhc2V0LnN0YXRlLnRvVXBwZXJDYXNlKCkgYXMgUG9tb2Rvcm9BcHBTdGF0ZXM7XHJcblx0XHRhY3RpdmF0ZVN0YXRlQnV0dG9uKGJ1dHRvbik7XHJcblx0XHRwb21vZG9yb0FwcC5jaGFuZ2VTdGF0ZShzdGF0ZSk7XHJcblx0fSlcclxuKTtcclxuIl19
