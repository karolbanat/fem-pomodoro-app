"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var settingsButton=document.querySelector("#settings-button"),settingsModal=document.querySelector("#settings-modal"),closeModalButton=document.querySelector("#close-settings-modal-button"),settingsForm=settingsModal.querySelector("#settings-form"),pomodoroTimeInput=settingsForm.querySelector("#pomodoro-time"),shortBreakTimeInput=settingsForm.querySelector("#short-break-time"),longBreakTimeInput=settingsForm.querySelector("#long-break-time"),fontRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="font"]')),colourRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="colour"]')),settingsSubmit=settingsForm.querySelector('button[type="submit"]'),timeStateButtons=Array.from(document.querySelectorAll(".state-button")),SECONDS_IN_MINUTE=60,DEFAULT_FONT="sans-serif",DEFAULT_COLOUR="red",DEFAULT_POMODORO_TIME=25,DEFAULT_SHORT_BREAK_TIME=5,DEFAULT_LONG_BREAK_TIME=15,AppTheme=_createClass(function t(){var o=this;_classCallCheck(this,t),this.colour=DEFAULT_COLOUR,this.font=DEFAULT_FONT,this.updateTheme=function(t,e){o.colour=e,o.font=t,document.body.dataset.font=t,document.body.dataset.theme=e}}),appTheme=new AppTheme,minutesToSeconds=function(t){return t*SECONDS_IN_MINUTE},getMinutesFromSeconds=function(t){return Math.floor(t/SECONDS_IN_MINUTE)},getRemainingSeconds=function(t){return t%SECONDS_IN_MINUTE},addLeadingZero=function(t){return t<10?"0".concat(t):t.toString()},formatTime=function(t){var e=getMinutesFromSeconds(t),t=getRemainingSeconds(t);return addLeadingZero(e)+":"+addLeadingZero(t)},PomodoroTimer=_createClass(function t(){var e=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,t),this.time=o,this.observers=[],this.state="INITIAL",this.start=function(){e.setState("COUNTING"),e.count()},this.count=function(){0===e.getCurrentTime()?(e.setState("END"),clearTimeout(e.countTimeout)):e.countTimeout=setTimeout(function(){e.updateTime(e.getCurrentTime()-1),e.count()},1e3)},this.pause=function(){e.setState("PAUSED"),clearTimeout(e.countTimeout)},this.restart=function(){e.setState("INITIAL"),e.updateTime(e.time),clearTimeout(e.countTimeout)},this.getTime=function(){return e.time},this.getCurrentTime=function(){return e.countingTime},this.setTime=function(t){e.time=t,e.updateTime(e.time)},this.updateTime=function(t){e.countingTime=t,e.notifyObservers()},this.getState=function(){return e.state},this.setState=function(t){e.state=t,"END"===e.state&&e.notifyObservers()},this.addObserver=function(t){e.observers.push(t)},this.notifyObservers=function(){e.observers.forEach(function(t){return t.update(e)})},this.countingTime=o}),TimerView=_createClass(function t(e){var r=this;_classCallCheck(this,t),this.update=function(t){r.updateTime(t.getCurrentTime()),r.updateProgressBar(t.getCurrentTime(),t.getTime()),"END"===t.getState()&&(r.updateButtonLabel("restart"),r.resetProgressBar())},this.updateButtonLabel=function(t){r.timerButton.innerText=t},this.updateTime=function(t){r.timerTime.innerHTML=formatTime(t)},this.updateProgressBar=function(t,e){var o=Number(getComputedStyle(r.timeProgressBar).getPropertyValue("--circumference"));r.timeProgressBar.style.setProperty("--progress",((1-t/e)*o).toFixed(0))},this.resetProgressBar=function(){r.timeProgressBar.style.setProperty("--progress","0")},this.timer=document.querySelector(".timer"),this.timeProgressBar=this.timer.querySelector("#progress-bar"),this.timerTime=this.timer.querySelector("#timer-time"),this.timerButton=this.timer.querySelector("#timer-button"),this.timerButton.addEventListener("click",e)}),TimerController=_createClass(function t(e){var o=this;_classCallCheck(this,t),this.timer=e,this.timerAction=function(){switch(o.timer.getState()){case"INITIAL":case"PAUSED":o.startTimer();break;case"COUNTING":o.pauseTimer();break;case"END":o.restartTimer()}},this.startTimer=function(){o.timer.start(),o.view.updateButtonLabel("pause")},this.pauseTimer=function(){o.timer.pause(),o.view.updateButtonLabel("start")},this.restartTimer=function(){o.timer.restart(),o.view.updateButtonLabel("start")},this.setTime=function(t){o.timer.setTime(t)},this.view=new TimerView(this.timerAction),e.addObserver(this.view),this.view.update(this.timer)}),PomodoroApp=_createClass(function t(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_POMODORO_TIME,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:DEFAULT_SHORT_BREAK_TIME,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:DEFAULT_LONG_BREAK_TIME;_classCallCheck(this,t),this.pomodoroTime=e,this.shortBreakTime=o,this.longBreakTime=i,this.appState="POMODORO",this.setTimes=function(t,e,o){r.pomodoroTime=t,r.shortBreakTime=e,r.longBreakTime=o,r.changeState(r.appState)},this.changeState=function(t){r.appState=t,r.timer.restartTimer(),r.setTimerBasedOnState()},this.setTimerBasedOnState=function(){switch(r.appState){case"POMODORO":r.timer.setTime(minutesToSeconds(r.pomodoroTime));break;case"SHORT_BREAK":r.timer.setTime(minutesToSeconds(r.shortBreakTime));break;case"LONG_BREAK":r.timer.setTime(minutesToSeconds(r.longBreakTime))}},this.timer=new TimerController(new PomodoroTimer(minutesToSeconds(this.pomodoroTime)))}),pomodoroApp=new PomodoroApp,openModal=function(){settingsModal.dataset.open="true"},closeModal=function(){settingsModal.dataset.open="false"},activateStateButton=function(t){timeStateButtons.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active")};settingsSubmit.addEventListener("click",function(t){t.preventDefault();var t=Number(pomodoroTimeInput.value),e=Number(shortBreakTimeInput.value),o=Number(longBreakTimeInput.value),r=fontRadioButtons.find(function(t){return t.checked}).value,i=colourRadioButtons.find(function(t){return t.checked}).value;pomodoroApp.setTimes(t,e,o),appTheme.updateTheme(r,i),closeModal()}),settingsButton.addEventListener("click",function(){openModal()}),null!=closeModalButton&&closeModalButton.addEventListener("click",function(){closeModal()}),timeStateButtons.forEach(function(t){return t.addEventListener("click",function(t){var t=t.target,e=t.dataset.state.toUpperCase();activateStateButton(t),pomodoroApp.changeState(e)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsic2V0dGluZ3NCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXR0aW5nc01vZGFsIiwiY2xvc2VNb2RhbEJ1dHRvbiIsInNldHRpbmdzRm9ybSIsInBvbW9kb3JvVGltZUlucHV0Iiwic2hvcnRCcmVha1RpbWVJbnB1dCIsImxvbmdCcmVha1RpbWVJbnB1dCIsImZvbnRSYWRpb0J1dHRvbnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sb3VyUmFkaW9CdXR0b25zIiwic2V0dGluZ3NTdWJtaXQiLCJ0aW1lU3RhdGVCdXR0b25zIiwiU0VDT05EU19JTl9NSU5VVEUiLCJERUZBVUxUX0ZPTlQiLCJERUZBVUxUX0NPTE9VUiIsIkRFRkFVTFRfUE9NT0RPUk9fVElNRSIsIkRFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSIsIkRFRkFVTFRfTE9OR19CUkVBS19USU1FIiwiQXBwVGhlbWUiLCJfY3JlYXRlQ2xhc3MiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJjb2xvdXIiLCJmb250IiwidXBkYXRlVGhlbWUiLCJib2R5IiwiZGF0YXNldCIsInRoZW1lIiwiYXBwVGhlbWUiLCJtaW51dGVzVG9TZWNvbmRzIiwibWludXRlcyIsImdldE1pbnV0ZXNGcm9tU2Vjb25kcyIsInNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJnZXRSZW1haW5pbmdTZWNvbmRzIiwiYWRkTGVhZGluZ1plcm8iLCJ0aW1lIiwiY29uY2F0IiwidG9TdHJpbmciLCJmb3JtYXRUaW1lIiwicmVtYWluaW5nU2Vjb25kcyIsIlBvbW9kb3JvVGltZXIiLCJfdGhpczIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJvYnNlcnZlcnMiLCJzdGF0ZSIsInN0YXJ0Iiwic2V0U3RhdGUiLCJjb3VudCIsImdldEN1cnJlbnRUaW1lIiwiY2xlYXJUaW1lb3V0IiwiY291bnRUaW1lb3V0Iiwic2V0VGltZW91dCIsInVwZGF0ZVRpbWUiLCJwYXVzZSIsInJlc3RhcnQiLCJnZXRUaW1lIiwiY291bnRpbmdUaW1lIiwic2V0VGltZSIsIm5vdGlmeU9ic2VydmVycyIsImdldFN0YXRlIiwiYWRkT2JzZXJ2ZXIiLCJvYnNlcnZlciIsInB1c2giLCJmb3JFYWNoIiwidXBkYXRlIiwiVGltZXJWaWV3IiwiYnV0dG9uT25DbGljayIsIl90aGlzMyIsIm9ic2VydmFibGUiLCJvYnMiLCJ1cGRhdGVQcm9ncmVzc0JhciIsInVwZGF0ZUJ1dHRvbkxhYmVsIiwicmVzZXRQcm9ncmVzc0JhciIsImxhYmVsIiwidGltZXJCdXR0b24iLCJpbm5lclRleHQiLCJ0aW1lclRpbWUiLCJpbm5lckhUTUwiLCJjdXJyZW50IiwiYmFzZSIsImNpcmN1bWZlcmVuY2UiLCJOdW1iZXIiLCJnZXRDb21wdXRlZFN0eWxlIiwidGltZVByb2dyZXNzQmFyIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJ0b0ZpeGVkIiwidGltZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiVGltZXJDb250cm9sbGVyIiwiX3RoaXM0IiwidGltZXJBY3Rpb24iLCJzdGFydFRpbWVyIiwicGF1c2VUaW1lciIsInJlc3RhcnRUaW1lciIsInZpZXciLCJQb21vZG9yb0FwcCIsIl90aGlzNSIsInBvbW9kb3JvVGltZSIsInNob3J0QnJlYWtUaW1lIiwibG9uZ0JyZWFrVGltZSIsImFwcFN0YXRlIiwic2V0VGltZXMiLCJwb21vZG9ybyIsInNob3J0QnJlYWsiLCJsb25nQnJlYWsiLCJjaGFuZ2VTdGF0ZSIsInNldFRpbWVyQmFzZWRPblN0YXRlIiwicG9tb2Rvcm9BcHAiLCJvcGVuTW9kYWwiLCJvcGVuIiwiY2xvc2VNb2RhbCIsImFjdGl2YXRlU3RhdGVCdXR0b24iLCJidXR0b24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImNob3NlbkZvbnQiLCJmaW5kIiwiY2hlY2tlZCIs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QSxFQUFPUyxPQUFPLENBQUEsRUFBRUgsTUFDL0VYLFlBQVlOLFNBQVNKLEVBQWNDLEVBQWdCQyxDQUFhLEVBQ2hFN0UsU0FBU0osWUFBWXFHLEVBQVlHLENBQVksRUFDN0NaLFdBQVUsQ0FDWCxDQUFDLEVBR0R6SCxlQUFla0csaUJBQWlCLFFBQVMsV0FDeENxQixVQUFTLENBQ1YsQ0FBQyxFQUVEbkgsTUFBQUEsa0JBQUFBLGlCQUFrQjhGLGlCQUFpQixRQUFTLFdBQzNDdUIsV0FBVSxDQUNYLENBQUMsRUFHRDFHLGlCQUFpQnlELFFBQVEsU0FBQW1ELEdBQU0sT0FDOUJBLEVBQU96QixpQkFBaUIsUUFBUyxTQUFDNkIsR0FDakMsSUFBTUosRUFBNEJJLEVBQUVPLE9BQzlCakYsRUFBMkJzRSxFQUFPNUYsUUFBUXNCLE1BQU1rRixZQUFXLEVBQ2pFYixvQkFBb0JDLENBQU0sRUFDMUJMLFlBQVlGLFlBQVkvRCxDQUFLLENBQzlCLENBQUMsQ0FBQyxDQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogbW9kYWwgYW5kIG1vZGFsIHJlYWx0ZWQgZWxlbWVudHMgKi9cclxuY29uc3Qgc2V0dGluZ3NCdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NldHRpbmdzLWJ1dHRvbicpO1xyXG5jb25zdCBzZXR0aW5nc01vZGFsOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXR0aW5ncy1tb2RhbCcpO1xyXG5jb25zdCBjbG9zZU1vZGFsQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZS1zZXR0aW5ncy1tb2RhbC1idXR0b24nKTtcclxuXHJcbi8qIHNldHRpbmdzIGZvcm0gZWxlbWVudHMgKi9cclxuY29uc3Qgc2V0dGluZ3NGb3JtOiBIVE1MRm9ybUVsZW1lbnQgPSBzZXR0aW5nc01vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNzZXR0aW5ncy1mb3JtJyk7XHJcbmNvbnN0IHBvbW9kb3JvVGltZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gc2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNwb21vZG9yby10aW1lJyk7XHJcbmNvbnN0IHNob3J0QnJlYWtUaW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignI3Nob3J0LWJyZWFrLXRpbWUnKTtcclxuY29uc3QgbG9uZ0JyZWFrVGltZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gc2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNsb25nLWJyZWFrLXRpbWUnKTtcclxuY29uc3QgZm9udFJhZGlvQnV0dG9uczogQXJyYXk8SFRNTElucHV0RWxlbWVudD4gPSBBcnJheS5mcm9tKFxyXG5cdHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cImZvbnRcIl0nKVxyXG4pO1xyXG5jb25zdCBjb2xvdXJSYWRpb0J1dHRvbnM6IEFycmF5PEhUTUxJbnB1dEVsZW1lbnQ+ID0gQXJyYXkuZnJvbShcclxuXHRzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdW25hbWU9XCJjb2xvdXJcIl0nKVxyXG4pO1xyXG5jb25zdCBzZXR0aW5nc1N1Ym1pdDogSFRNTEJ1dHRvbkVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHJcbi8qIHRpbWUgc3RhdGUgYnV0dG9ucyAqL1xyXG5jb25zdCB0aW1lU3RhdGVCdXR0b25zOiBBcnJheTxIVE1MQnV0dG9uRWxlbWVudD4gPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGF0ZS1idXR0b24nKSk7XHJcblxyXG4vKiBjb25zdGFudHMgKi9cclxuLyogLS0tIGdlbmVyYWwgKi9cclxuY29uc3QgU0VDT05EU19JTl9NSU5VVEU6IG51bWJlciA9IDYwO1xyXG4vKiAtLS0gdGhlbWUgKi9cclxuY29uc3QgREVGQVVMVF9GT05UOiBGb250ID0gJ3NhbnMtc2VyaWYnO1xyXG5jb25zdCBERUZBVUxUX0NPTE9VUjogQ29sb3VyID0gJ3JlZCc7XHJcbi8qIC0tLSB0aW1lcyAqL1xyXG5jb25zdCBERUZBVUxUX1BPTU9ET1JPX1RJTUU6IG51bWJlciA9IDI1O1xyXG5jb25zdCBERUZBVUxUX1NIT1JUX0JSRUFLX1RJTUU6IG51bWJlciA9IDU7XHJcbmNvbnN0IERFRkFVTFRfTE9OR19CUkVBS19USU1FOiBudW1iZXIgPSAxNTtcclxuXHJcbi8qIE9ic2VydmVyIHBhdHRlcm4gaW50ZXJmYWNlcyAqL1xyXG5pbnRlcmZhY2UgT2JzZXJ2YWJsZSB7XHJcblx0YWRkT2JzZXJ2ZXI6IChvYnNlcnZlcjogT2JzZXJ2ZXIpID0+IHZvaWQ7XHJcblx0bm90aWZ5T2JzZXJ2ZXJzOiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgT2JzZXJ2ZXIge1xyXG5cdHVwZGF0ZTogKG9ic2VydmFibGU6IE9ic2VydmFibGUpID0+IHZvaWQ7XHJcbn1cclxuXHJcbi8qIHRoZW1lIHN0YXRlcyAqL1xyXG50eXBlIENvbG91ciA9ICdyZWQnIHwgJ2N5YW4nIHwgJ3Zpb2xldCc7XHJcbnR5cGUgRm9udCA9ICdzZXJpZicgfCAnc2Fucy1zZXJpZicgfCAnbW9ub3NwYWNlJztcclxuaW50ZXJmYWNlIFRoZW1lIHtcclxuXHRjb2xvdXI6IENvbG91cjtcclxuXHRmb250OiBGb250O1xyXG5cdHVwZGF0ZVRoZW1lOiAoZm9udDogRm9udCwgY29sb3VyOiBDb2xvdXIpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIEFwcFRoZW1lIGltcGxlbWVudHMgVGhlbWUge1xyXG5cdGNvbG91cjogQ29sb3VyID0gREVGQVVMVF9DT0xPVVI7XHJcblx0Zm9udDogRm9udCA9IERFRkFVTFRfRk9OVDtcclxuXHJcblx0dXBkYXRlVGhlbWUgPSAoZm9udDogRm9udCwgY29sb3VyOiBDb2xvdXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuY29sb3VyID0gY29sb3VyO1xyXG5cdFx0dGhpcy5mb250ID0gZm9udDtcclxuXHRcdGRvY3VtZW50LmJvZHkuZGF0YXNldC5mb250ID0gZm9udDtcclxuXHRcdGRvY3VtZW50LmJvZHkuZGF0YXNldC50aGVtZSA9IGNvbG91cjtcclxuXHR9O1xyXG59XHJcblxyXG5jb25zdCBhcHBUaGVtZTogVGhlbWUgPSBuZXcgQXBwVGhlbWUoKTtcclxuXHJcbi8qIFRpbWVyIGZ1bmN0aW9uYWxpdHkgKi9cclxudHlwZSBUaW1lclN0YXRlID0gJ0lOSVRJQUwnIHwgJ0NPVU5USU5HJyB8ICdQQVVTRUQnIHwgJ0VORCc7XHJcblxyXG5jb25zdCBtaW51dGVzVG9TZWNvbmRzID0gKG1pbnV0ZXM6IG51bWJlcik6IG51bWJlciA9PiBtaW51dGVzICogU0VDT05EU19JTl9NSU5VVEU7XHJcblxyXG5jb25zdCBnZXRNaW51dGVzRnJvbVNlY29uZHMgPSAoc2Vjb25kczogbnVtYmVyKTogbnVtYmVyID0+IE1hdGguZmxvb3Ioc2Vjb25kcyAvIFNFQ09ORFNfSU5fTUlOVVRFKTtcclxuXHJcbmNvbnN0IGdldFJlbWFpbmluZ1NlY29uZHMgPSAoc2Vjb25kczogbnVtYmVyKTogbnVtYmVyID0+IHNlY29uZHMgJSBTRUNPTkRTX0lOX01JTlVURTtcclxuXHJcbmNvbnN0IGFkZExlYWRpbmdaZXJvID0gKHRpbWU6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcblx0cmV0dXJuIHRpbWUgPCAxMCA/IGAwJHt0aW1lfWAgOiB0aW1lLnRvU3RyaW5nKCk7XHJcbn07XHJcblxyXG5jb25zdCBmb3JtYXRUaW1lID0gKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcblx0Y29uc3QgbWludXRlcyA9IGdldE1pbnV0ZXNGcm9tU2Vjb25kcyhzZWNvbmRzKTtcclxuXHRjb25zdCByZW1haW5pbmdTZWNvbmRzID0gZ2V0UmVtYWluaW5nU2Vjb25kcyhzZWNvbmRzKTtcclxuXHRyZXR1cm4gYWRkTGVhZGluZ1plcm8obWludXRlcykgKyAnOicgKyBhZGRMZWFkaW5nWmVybyhyZW1haW5pbmdTZWNvbmRzKTtcclxufTtcclxuXHJcbmludGVyZmFjZSBUaW1lciBleHRlbmRzIE9ic2VydmFibGUge1xyXG5cdHN0YXRlOiBUaW1lclN0YXRlO1xyXG5cdHN0YXJ0OiAoKSA9PiB2b2lkO1xyXG5cdHBhdXNlOiAoKSA9PiB2b2lkO1xyXG5cdHJlc3RhcnQ6ICgpID0+IHZvaWQ7XHJcblx0c2V0VGltZTogKHRpbWU6IG51bWJlcikgPT4gdm9pZDtcclxuXHRnZXRUaW1lOiAoKSA9PiBudW1iZXI7XHJcblx0Z2V0Q3VycmVudFRpbWU6ICgpID0+IG51bWJlcjtcclxuXHRnZXRTdGF0ZTogKCkgPT4gVGltZXJTdGF0ZTtcclxuXHRzZXRTdGF0ZTogKHN0YXRlOiBUaW1lclN0YXRlKSA9PiB2b2lkO1xyXG59XHJcblxyXG5jbGFzcyBQb21vZG9yb1RpbWVyIGltcGxlbWVudHMgVGltZXIge1xyXG5cdG9ic2VydmVyczogT2JzZXJ2ZXJbXSA9IFtdO1xyXG5cdGNvdW50VGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcblx0c3RhdGU6IFRpbWVyU3RhdGUgPSAnSU5JVElBTCc7XHJcblx0cHJpdmF0ZSBjb3VudGluZ1RpbWU6IG51bWJlcjtcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSB0aW1lOiBudW1iZXIgPSAwKSB7XHJcblx0XHR0aGlzLmNvdW50aW5nVGltZSA9IHRpbWU7XHJcblx0fVxyXG5cclxuXHRzdGFydCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc2V0U3RhdGUoJ0NPVU5USU5HJyk7XHJcblx0XHR0aGlzLmNvdW50KCk7XHJcblx0fTtcclxuXHJcblx0Y291bnQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRpZiAodGhpcy5nZXRDdXJyZW50VGltZSgpID09PSAwKSB7XHJcblx0XHRcdHRoaXMuc2V0U3RhdGUoJ0VORCcpO1xyXG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy5jb3VudFRpbWVvdXQpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5jb3VudFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVUaW1lKHRoaXMuZ2V0Q3VycmVudFRpbWUoKSAtIDEpO1xyXG5cdFx0XHR0aGlzLmNvdW50KCk7XHJcblx0XHR9LCAxMDAwKTtcclxuXHR9O1xyXG5cclxuXHRwYXVzZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc2V0U3RhdGUoJ1BBVVNFRCcpO1xyXG5cdFx0Y2xlYXJUaW1lb3V0KHRoaXMuY291bnRUaW1lb3V0KTtcclxuXHR9O1xyXG5cclxuXHRyZXN0YXJ0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSgnSU5JVElBTCcpO1xyXG5cdFx0dGhpcy51cGRhdGVUaW1lKHRoaXMudGltZSk7XHJcblx0XHRjbGVhclRpbWVvdXQodGhpcy5jb3VudFRpbWVvdXQpO1xyXG5cdH07XHJcblxyXG5cdGdldFRpbWUgPSAoKTogbnVtYmVyID0+IHRoaXMudGltZTtcclxuXHJcblx0Z2V0Q3VycmVudFRpbWUgPSAoKTogbnVtYmVyID0+IHRoaXMuY291bnRpbmdUaW1lO1xyXG5cclxuXHRzZXRUaW1lID0gKHRpbWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lID0gdGltZTtcclxuXHRcdHRoaXMudXBkYXRlVGltZSh0aGlzLnRpbWUpO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmNvdW50aW5nVGltZSA9IHRpbWU7XHJcblx0XHR0aGlzLm5vdGlmeU9ic2VydmVycygpO1xyXG5cdH07XHJcblxyXG5cdGdldFN0YXRlID0gKCk6IFRpbWVyU3RhdGUgPT4gdGhpcy5zdGF0ZTtcclxuXHJcblx0c2V0U3RhdGUgPSAoc3RhdGU6IFRpbWVyU3RhdGUpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHJcblx0XHRpZiAodGhpcy5zdGF0ZSA9PT0gJ0VORCcpIHRoaXMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcblx0fTtcclxuXHJcblx0YWRkT2JzZXJ2ZXIgPSAob2JzZXJ2ZXI6IE9ic2VydmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuXHR9O1xyXG5cclxuXHRub3RpZnlPYnNlcnZlcnMgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IG9ic2VydmVyLnVwZGF0ZSh0aGlzKSk7XHJcblx0fTtcclxufVxyXG5cclxuY2xhc3MgVGltZXJWaWV3IGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG5cdHByaXZhdGUgdGltZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgdGltZVByb2dyZXNzQmFyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHRpbWVyVGltZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0aW1lckJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGJ1dHRvbk9uQ2xpY2s6IChlOiBFdmVudCkgPT4gdm9pZCkge1xyXG5cdFx0dGhpcy50aW1lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lcicpO1xyXG5cdFx0dGhpcy50aW1lUHJvZ3Jlc3NCYXIgPSB0aGlzLnRpbWVyLnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy1iYXInKTtcclxuXHRcdHRoaXMudGltZXJUaW1lID0gdGhpcy50aW1lci5xdWVyeVNlbGVjdG9yKCcjdGltZXItdGltZScpO1xyXG5cdFx0dGhpcy50aW1lckJ1dHRvbiA9IHRoaXMudGltZXIucXVlcnlTZWxlY3RvcignI3RpbWVyLWJ1dHRvbicpO1xyXG5cdFx0dGhpcy50aW1lckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGJ1dHRvbk9uQ2xpY2spO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlID0gKG9ic2VydmFibGU6IE9ic2VydmFibGUpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IG9iczogVGltZXIgPSBvYnNlcnZhYmxlIGFzIFRpbWVyO1xyXG5cdFx0dGhpcy51cGRhdGVUaW1lKG9icy5nZXRDdXJyZW50VGltZSgpKTtcclxuXHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3NCYXIob2JzLmdldEN1cnJlbnRUaW1lKCksIG9icy5nZXRUaW1lKCkpO1xyXG5cclxuXHRcdGlmIChvYnMuZ2V0U3RhdGUoKSA9PT0gJ0VORCcpIHtcclxuXHRcdFx0dGhpcy51cGRhdGVCdXR0b25MYWJlbCgncmVzdGFydCcpO1xyXG5cdFx0XHR0aGlzLnJlc2V0UHJvZ3Jlc3NCYXIoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHR1cGRhdGVCdXR0b25MYWJlbCA9IChsYWJlbDogc3RyaW5nKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVyQnV0dG9uLmlubmVyVGV4dCA9IGxhYmVsO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVyVGltZS5pbm5lckhUTUwgPSBmb3JtYXRUaW1lKHRpbWUpO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVByb2dyZXNzQmFyID0gKGN1cnJlbnQ6IG51bWJlciwgYmFzZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCBjaXJjdW1mZXJlbmNlOiBudW1iZXIgPSBOdW1iZXIoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRpbWVQcm9ncmVzc0JhcikuZ2V0UHJvcGVydHlWYWx1ZSgnLS1jaXJjdW1mZXJlbmNlJykpO1xyXG5cdFx0dGhpcy50aW1lUHJvZ3Jlc3NCYXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tcHJvZ3Jlc3MnLCAoKDEgLSBjdXJyZW50IC8gYmFzZSkgKiBjaXJjdW1mZXJlbmNlKS50b0ZpeGVkKDApKTtcclxuXHR9O1xyXG5cclxuXHRyZXNldFByb2dyZXNzQmFyID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lUHJvZ3Jlc3NCYXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tcHJvZ3Jlc3MnLCAnMCcpO1xyXG5cdH07XHJcbn1cclxuXHJcbmNsYXNzIFRpbWVyQ29udHJvbGxlciB7XHJcblx0cHJpdmF0ZSB2aWV3OiBUaW1lclZpZXc7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSB0aW1lcjogVGltZXIpIHtcclxuXHRcdHRoaXMudmlldyA9IG5ldyBUaW1lclZpZXcodGhpcy50aW1lckFjdGlvbik7XHJcblx0XHR0aW1lci5hZGRPYnNlcnZlcih0aGlzLnZpZXcpO1xyXG5cdFx0dGhpcy52aWV3LnVwZGF0ZSh0aGlzLnRpbWVyKTtcclxuXHR9XHJcblxyXG5cdHRpbWVyQWN0aW9uID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0c3dpdGNoICh0aGlzLnRpbWVyLmdldFN0YXRlKCkpIHtcclxuXHRcdFx0Y2FzZSAnSU5JVElBTCc6XHJcblx0XHRcdGNhc2UgJ1BBVVNFRCc6XHJcblx0XHRcdFx0dGhpcy5zdGFydFRpbWVyKCk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ0NPVU5USU5HJzpcclxuXHRcdFx0XHR0aGlzLnBhdXNlVGltZXIoKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnRU5EJzpcclxuXHRcdFx0XHR0aGlzLnJlc3RhcnRUaW1lcigpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHN0YXJ0VGltZXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVyLnN0YXJ0KCk7XHJcblx0XHR0aGlzLnZpZXcudXBkYXRlQnV0dG9uTGFiZWwoJ3BhdXNlJyk7XHJcblx0fTtcclxuXHJcblx0cGF1c2VUaW1lciA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZXIucGF1c2UoKTtcclxuXHRcdHRoaXMudmlldy51cGRhdGVCdXR0b25MYWJlbCgnc3RhcnQnKTtcclxuXHR9O1xyXG5cclxuXHRyZXN0YXJ0VGltZXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVyLnJlc3RhcnQoKTtcclxuXHRcdHRoaXMudmlldy51cGRhdGVCdXR0b25MYWJlbCgnc3RhcnQnKTtcclxuXHR9O1xyXG5cclxuXHRzZXRUaW1lID0gKHRpbWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lci5zZXRUaW1lKHRpbWUpO1xyXG5cdH07XHJcbn1cclxuLyogVGltZXIgZnVuY3Rpb25hbGl0eSBlbmQgKi9cclxuXHJcbi8qIEFwcCAqL1xyXG50eXBlIFBvbW9kb3JvQXBwU3RhdGVzID0gJ1BPTU9ET1JPJyB8ICdTSE9SVF9CUkVBSycgfCAnTE9OR19CUkVBSyc7XHJcbmNsYXNzIFBvbW9kb3JvQXBwIHtcclxuXHRwcml2YXRlIHRpbWVyOiBUaW1lckNvbnRyb2xsZXI7XHJcblx0cHJpdmF0ZSBhcHBTdGF0ZTogUG9tb2Rvcm9BcHBTdGF0ZXMgPSAnUE9NT0RPUk8nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgcG9tb2Rvcm9UaW1lOiBudW1iZXIgPSBERUZBVUxUX1BPTU9ET1JPX1RJTUUsXHJcblx0XHRwcml2YXRlIHNob3J0QnJlYWtUaW1lOiBudW1iZXIgPSBERUZBVUxUX1NIT1JUX0JSRUFLX1RJTUUsXHJcblx0XHRwcml2YXRlIGxvbmdCcmVha1RpbWU6IG51bWJlciA9IERFRkFVTFRfTE9OR19CUkVBS19USU1FXHJcblx0KSB7XHJcblx0XHR0aGlzLnRpbWVyID0gbmV3IFRpbWVyQ29udHJvbGxlcihuZXcgUG9tb2Rvcm9UaW1lcihtaW51dGVzVG9TZWNvbmRzKHRoaXMucG9tb2Rvcm9UaW1lKSkpO1xyXG5cdH1cclxuXHJcblx0c2V0VGltZXMgPSAocG9tb2Rvcm86IG51bWJlciwgc2hvcnRCcmVhazogbnVtYmVyLCBsb25nQnJlYWs6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5wb21vZG9yb1RpbWUgPSBwb21vZG9ybztcclxuXHRcdHRoaXMuc2hvcnRCcmVha1RpbWUgPSBzaG9ydEJyZWFrO1xyXG5cdFx0dGhpcy5sb25nQnJlYWtUaW1lID0gbG9uZ0JyZWFrO1xyXG5cdFx0dGhpcy5jaGFuZ2VTdGF0ZSh0aGlzLmFwcFN0YXRlKTtcclxuXHR9O1xyXG5cclxuXHRjaGFuZ2VTdGF0ZSA9IChzdGF0ZTogUG9tb2Rvcm9BcHBTdGF0ZXMpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuYXBwU3RhdGUgPSBzdGF0ZTtcclxuXHRcdHRoaXMudGltZXIucmVzdGFydFRpbWVyKCk7XHJcblx0XHR0aGlzLnNldFRpbWVyQmFzZWRPblN0YXRlKCk7XHJcblx0fTtcclxuXHJcblx0c2V0VGltZXJCYXNlZE9uU3RhdGUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRzd2l0Y2ggKHRoaXMuYXBwU3RhdGUpIHtcclxuXHRcdFx0Y2FzZSAnUE9NT0RPUk8nOlxyXG5cdFx0XHRcdHRoaXMudGltZXIuc2V0VGltZShtaW51dGVzVG9TZWNvbmRzKHRoaXMucG9tb2Rvcm9UaW1lKSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ1NIT1JUX0JSRUFLJzpcclxuXHRcdFx0XHR0aGlzLnRpbWVyLnNldFRpbWUobWludXRlc1RvU2Vjb25kcyh0aGlzLnNob3J0QnJlYWtUaW1lKSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ0xPTkdfQlJFQUsnOlxyXG5cdFx0XHRcdHRoaXMudGltZXIuc2V0VGltZShtaW51dGVzVG9TZWNvbmRzKHRoaXMubG9uZ0JyZWFrVGltZSkpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuY29uc3QgcG9tb2Rvcm9BcHA6IFBvbW9kb3JvQXBwID0gbmV3IFBvbW9kb3JvQXBwKCk7XHJcblxyXG4vKiBtb2RhbCBmdW5jdGlvbnMgKi9cclxuY29uc3Qgb3Blbk1vZGFsID0gKCkgPT4ge1xyXG5cdHNldHRpbmdzTW9kYWwuZGF0YXNldC5vcGVuID0gJ3RydWUnO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VNb2RhbCA9ICgpID0+IHtcclxuXHRzZXR0aW5nc01vZGFsLmRhdGFzZXQub3BlbiA9ICdmYWxzZSc7XHJcbn07XHJcblxyXG4vKiBhcHAgdGltZSBzdGF0ZSBidXR0b25zIGZ1bmN0aW9uICovXHJcbmNvbnN0IGFjdGl2YXRlU3RhdGVCdXR0b24gPSAoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkgPT4ge1xyXG5cdHRpbWVTdGF0ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcclxuXHRidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbn07XHJcblxyXG4vKiBldmVudCBsaXN0ZW5lcnMgKi9cclxuc2V0dGluZ3NTdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogRXZlbnQpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0Y29uc3QgcG9tb2Rvcm9UaW1lID0gTnVtYmVyKHBvbW9kb3JvVGltZUlucHV0LnZhbHVlKTtcclxuXHRjb25zdCBzaG9ydEJyZWFrVGltZSA9IE51bWJlcihzaG9ydEJyZWFrVGltZUlucHV0LnZhbHVlKTtcclxuXHRjb25zdCBsb25nQnJlYWtUaW1lID0gTnVtYmVyKGxvbmdCcmVha1RpbWVJbnB1dC52YWx1ZSk7XHJcblx0Y29uc3QgY2hvc2VuRm9udDogRm9udCA9IGZvbnRSYWRpb0J1dHRvbnMuZmluZChidXR0b24gPT4gYnV0dG9uLmNoZWNrZWQpLnZhbHVlIGFzIEZvbnQ7XHJcblx0Y29uc3QgY2hvc2VuQ29sb3VyOiBDb2xvdXIgPSBjb2xvdXJSYWRpb0J1dHRvbnMuZmluZChidXR0b24gPT4gYnV0dG9uLmNoZWNrZWQpLnZhbHVlIGFzIENvbG91cjtcclxuXHRwb21vZG9yb0FwcC5zZXRUaW1lcyhwb21vZG9yb1RpbWUsIHNob3J0QnJlYWtUaW1lLCBsb25nQnJlYWtUaW1lKTtcclxuXHRhcHBUaGVtZS51cGRhdGVUaGVtZShjaG9zZW5Gb250LCBjaG9zZW5Db2xvdXIpO1xyXG5cdGNsb3NlTW9kYWwoKTtcclxufSk7XHJcblxyXG4vKiBtb2RhbCBvcGVuaW5nIGFuZCBjbG9zaW5nICovXHJcbnNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdG9wZW5Nb2RhbCgpO1xyXG59KTtcclxuXHJcbmNsb3NlTW9kYWxCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNsb3NlTW9kYWwoKTtcclxufSk7XHJcbi8qIG1vZGFsIG9wZW5pbmcgYW5kIGNsb3NpbmcgZW5kICovXHJcblxyXG50aW1lU3RhdGVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+XHJcblx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IEV2ZW50KSA9PiB7XHJcblx0XHRjb25zdCBidXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZS50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBzdGF0ZTogUG9tb2Rvcm9BcHBTdGF0ZXMgPSBidXR0b24uZGF0YXNldC5zdGF0ZS50b1VwcGVyQ2FzZSgpIGFzIFBvbW9kb3JvQXBwU3RhdGVzO1xyXG5cdFx0YWN0aXZhdGVTdGF0ZUJ1dHRvbihidXR0b24pO1xyXG5cdFx0cG9tb2Rvcm9BcHAuY2hhbmdlU3RhdGUoc3RhdGUpO1xyXG5cdH0pXHJcbik7XHJcbiJdfQ==
