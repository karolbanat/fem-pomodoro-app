"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var settingsButton=document.querySelector("#settings-button"),settingsModal=document.querySelector("#settings-modal"),closeModalButton=document.querySelector("#close-settings-modal-button"),settingsForm=settingsModal.querySelector("#settings-form"),pomodoroTimeInput=settingsForm.querySelector("#pomodoro-time"),shortBreakTimeInput=settingsForm.querySelector("#short-break-time"),longBreakTimeInput=settingsForm.querySelector("#long-break-time"),fontRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="font"]')),colourRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="colour"]')),settingsSubmit=settingsForm.querySelector('button[type="submit"]'),timer=document.querySelector(".timer"),timeProgressBar=timer.querySelector("#progress-bar"),timerTime=timer.querySelector("#timer-time"),timerButton=timer.querySelector("#timer-button"),SECONDS_IN_MINUTE=60,DEFAULT_FONT="sans-serif",DEFAULT_COLOUR="red",DEFAULT_POMODORO_TIME=25,DEFAULT_SHORT_BREAK_TIME=5,DEFAULT_LONG_BREAK_TIME=5,AppTheme=_createClass(function t(){var o=this;_classCallCheck(this,t),this.colour=DEFAULT_COLOUR,this.font=DEFAULT_FONT,this.updateTheme=function(t,e){o.colour=e,o.font=t,document.body.dataset.font=t,document.body.dataset.theme=e}}),appTheme=new AppTheme,minutesToSeconds=function(t){return t*SECONDS_IN_MINUTE},getMinutesFromSeconds=function(t){return Math.floor(t/SECONDS_IN_MINUTE)},getRemainingSeconds=function(t){return t%SECONDS_IN_MINUTE},addLeadingZero=function(t){return t<10?"0".concat(t):t.toString()},formatTime=function(t){var e=getMinutesFromSeconds(t),t=getRemainingSeconds(t);return addLeadingZero(e)+":"+addLeadingZero(t)},PomodoroTimer=_createClass(function t(){var e=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,t),this.time=o,this.state="INITIAL",this.start=function(){e.state="COUNTING",e.count()},this.count=function(){e.countTimeout=setTimeout(function(){e.setTime(e.getTime()-1),e.count()},1e3)},this.pause=function(){e.state="PAUSED",clearTimeout(e.countTimeout)},this.restart=function(){e.state="INITIAL",e.countingTime=e.time},this.getTime=function(){return e.countingTime},this.setTime=function(t){e.time=t,e.countingTime=t,timerTime.innerText=formatTime(e.countingTime)},this.getState=function(){return e.state},this.setState=function(t){e.state=t},this.countingTime=o}),TimerController=_createClass(function t(e){var o=this;_classCallCheck(this,t),this.timer=e,this.timerAction=function(){switch(o.timer.getState()){case"INITIAL":case"PAUSED":o.timer.start(),timerButton.innerText="pause";break;case"COUNTING":o.timer.pause(),timerButton.innerText="start"}},this.setTime=function(t){o.timer.setTime(t)},timerButton.addEventListener("click",this.timerAction),timerTime.innerText=formatTime(this.timer.getTime())}),PomodoroApp=_createClass(function t(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_POMODORO_TIME,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:DEFAULT_SHORT_BREAK_TIME,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:DEFAULT_LONG_BREAK_TIME;_classCallCheck(this,t),this.pomodoroTime=e,this.shortBreakTime=o,this.longBreakTime=i,this.setTimes=function(t,e,o){n.pomodoroTime=t,n.shortBreakTime=e,n.longBreakTime=o},this.timer=new TimerController(new PomodoroTimer(minutesToSeconds(this.pomodoroTime)))}),pomodoroApp=new PomodoroApp,openModal=function(){settingsModal.dataset.open="true"},closeModal=function(){settingsModal.dataset.open="false"};settingsSubmit.addEventListener("click",function(t){t.preventDefault();var t=Number(pomodoroTimeInput.value),e=Number(shortBreakTimeInput.value),o=Number(longBreakTimeInput.value),n=fontRadioButtons.find(function(t){return t.checked}).value,i=colourRadioButtons.find(function(t){return t.checked}).value;pomodoroApp.setTimes(t,e,o),appTheme.updateTheme(n,i),closeModal()}),settingsButton.addEventListener("click",function(){openModal()}),null!=closeModalButton&&closeModalButton.addEventListener("click",function(){closeModal()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsic2V0dGluZ3NCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXR0aW5nc01vZGFsIiwiY2xvc2VNb2RhbEJ1dHRvbiIsInNldHRpbmdzRm9ybSIsInBvbW9kb3JvVGltZUlucHV0Iiwic2hvcnRCcmVha1RpbWVJbnB1dCIsImxvbmdCcmVha1RpbWVJbnB1dCIsImZvbnRSYWRpb0J1dHRvbnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sb3VyUmFkaW9CdXR0b25zIiwic2V0dGluZ3NTdWJtaXQiLCJ0aW1lciIsInRpbWVQcm9ncmVzc0JhciIsInRpbWVyVGltZSIsInRpbWVyQnV0dG9uIiwiU0VDT05EU19JTl9NSU5VVEUiLCJERUZBVUxUX0ZPTlQiLCJERUZBVUxUX0NPTE9VUiIsIkRFRkFVTFRfUE9NT0RPUk9fVElNRSIsIkRFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSIsIkRFRkFVTFRfTE9OR19CUkVBS19USU1FIiwiQXBwVGhlbWUiLCJfY3JlYXRlQ2xhc3MiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJjb2xvdXIiLCJmb250IiwidXBkYXRlVGhlbWUiLCJib2R5IiwiZGF0YXNldCIsInRoZW1lIiwiYXBwVGhlbWUiLCJtaW51dGVzVG9TZWNvbmRzIiwibWludXRlcyIsImdldE1pbnV0ZXNGcm9tU2Vjb25kcyIsInNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJnZXRSZW1haW5pbmdTZWNvbmRzIiwiYWRkTGVhZGluZ1plcm8iLCJ0aW1lIiwiY29uY2F0IiwidG9TdHJpbmciLCJmb3JtYXRUaW1lIiwicmVtYWluaW5nU2Vjb25kcyIsIlBvbW9kb3JvVGltZXIiLCJfdGhpczIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzdGF0ZSIsInN0YXJ0IiwiY291bnQiLCJjb3VudFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2V0VGltZSIsImdldFRpbWUiLCJwYXVzZSIsImNsZWFyVGltZW91dCIsInJlc3RhcnQiLCJjb3VudGluZ1RpbWUiLCJpbm5lclRleHQiLCJnZXRTdGF0ZSIsInNldFN0YXRlIiwiVGltZXJDb250cm9sbGVyIiwiX3RoaXMzIiwidGltZXJBY3Rpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiUG9tb2Rvcm9BcHAiLCJfdGhpczQiLCJwb21vZG9yb1RpbWUiLCJzaG9ydEJyZWFrVGltZSIsImxvbmdCcmVha1RpbWUiLCJzZXRUaW1lcyIsInBvbW9kb3JvIiwic2hvcnRCcmVhayIsImxvbmdCcmVhayIsInBvbW9kb3JvQXBwIiwib3Blbk1vZGFsIiwib3BlbiIsImNsb3NlTW9kYWwiLCJlIiwicHJldmVudERlZmF1bHQiLCJOdW1iZXIiLCJ2YWx1ZSIsImNob3NlbkZvbnQiLCJmaW5kIiwiYnV0dG9uIiwiY2hlY2tlZCIsImNob3NlbkNvbG91ciJdLCJtYXBwaW5ncyI6IjJqQ0FDQSxJQUFNQSxlQUFvQ0MsU0FBU0MsY0FBYyxrQkFBa0IsRUFDN0VDLGNBQTZCRixTQUFTQyxjQUFjLGlCQUFpQixFQUNyRUUsaUJBQXNDSCxTQUFTQyxjQUFjLDhCQUE4QixFQUczRkcsYUFBZ0NGLGNBQWNELGNBQWMsZ0JBQWdCLEVBQzVFSSxrQkFBc0NELGFBQWFILGNBQWMsZ0JBQWdCLEVBQ2pGSyxvQkFBd0NGLGFBQWFILGNBQWMsbUJBQW1CLEVBQ3RGTSxtQkFBdUNILGFBQWFILGNBQWMsa0JBQWtCLEVBQ3BGTyxpQkFBNENDLE1BQU1DLEtBQ3ZETixhQUFhTyxpQkFBaUIsa0NBQWtDLENBQUMsRUFFNURDLG1CQUE4Q0gsTUFBTUMsS0FDekROLGFBQWFPLGlCQUFpQixvQ0FBb0MsQ0FBQyxFQUU5REUsZUFBb0NULGFBQWFILGNBQWMsdUJBQXVCLEVBR3RGYSxNQUFxQmQsU0FBU0MsY0FBYyxRQUFRLEVBQ3BEYyxnQkFBK0JELE1BQU1iLGNBQWMsZUFBZSxFQUNsRWUsVUFBeUJGLE1BQU1iLGNBQWMsYUFBYSxFQUMxRGdCLFlBQWlDSCxNQUFNYixj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QUNqRFosRUFBZ0JXLE9BQU9oRixtQkFBbUJpRixLQUFLLEVBQy9DQyxFQUFtQmpGLGlCQUFpQmtGLEtBQUssU0FBQUMsR0FBTSxPQUFJQSxFQUFPQyxPQUFPLENBQUEsRUFBRUosTUFDbkVLLEVBQXVCakYsbUJBQW1COEUsS0FBSyxTQUFBQyxHQUFNLE9BQUlBLEVBQU9DLE9BQU8sQ0FBQSxFQUFFSixNQUMvRVAsWUFBWUosU0FBU0gsRUFBY0MsRUFBZ0JDLENBQWEsRUFDaEV6QyxTQUFTSixZQUFZMEQsRUFBWUksQ0FBWSxFQUM3Q1QsV0FBVSxDQUNYLENBQUMsRUFHRHJGLGVBQWV3RSxpQkFBaUIsUUFBUyxXQUN4Q1csVUFBUyxDQUNWLENBQUMsRUFFRC9FLE1BQUFBLGtCQUFBQSxpQkFBa0JvRSxpQkFBaUIsUUFBUyxXQUMzQ2EsV0FBVSxDQUNYLENBQUMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBtb2RhbCBhbmQgbW9kYWwgcmVhbHRlZCBlbGVtZW50cyAqL1xyXG5jb25zdCBzZXR0aW5nc0J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2V0dGluZ3MtYnV0dG9uJyk7XHJcbmNvbnN0IHNldHRpbmdzTW9kYWw6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NldHRpbmdzLW1vZGFsJyk7XHJcbmNvbnN0IGNsb3NlTW9kYWxCdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlLXNldHRpbmdzLW1vZGFsLWJ1dHRvbicpO1xyXG5cclxuLyogc2V0dGluZ3MgZm9ybSBlbGVtZW50cyAqL1xyXG5jb25zdCBzZXR0aW5nc0Zvcm06IEhUTUxGb3JtRWxlbWVudCA9IHNldHRpbmdzTW9kYWwucXVlcnlTZWxlY3RvcignI3NldHRpbmdzLWZvcm0nKTtcclxuY29uc3QgcG9tb2Rvcm9UaW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignI3BvbW9kb3JvLXRpbWUnKTtcclxuY29uc3Qgc2hvcnRCcmVha1RpbWVJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yKCcjc2hvcnQtYnJlYWstdGltZScpO1xyXG5jb25zdCBsb25nQnJlYWtUaW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignI2xvbmctYnJlYWstdGltZScpO1xyXG5jb25zdCBmb250UmFkaW9CdXR0b25zOiBBcnJheTxIVE1MSW5wdXRFbGVtZW50PiA9IEFycmF5LmZyb20oXHJcblx0c2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiZm9udFwiXScpXHJcbik7XHJcbmNvbnN0IGNvbG91clJhZGlvQnV0dG9uczogQXJyYXk8SFRNTElucHV0RWxlbWVudD4gPSBBcnJheS5mcm9tKFxyXG5cdHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cImNvbG91clwiXScpXHJcbik7XHJcbmNvbnN0IHNldHRpbmdzU3VibWl0OiBIVE1MQnV0dG9uRWxlbWVudCA9IHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG5cclxuLyogdGltZXIgZWxlbWVudHMgKi9cclxuY29uc3QgdGltZXI6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWVyJyk7XHJcbmNvbnN0IHRpbWVQcm9ncmVzc0JhcjogSFRNTEVsZW1lbnQgPSB0aW1lci5xdWVyeVNlbGVjdG9yKCcjcHJvZ3Jlc3MtYmFyJyk7XHJcbmNvbnN0IHRpbWVyVGltZTogSFRNTEVsZW1lbnQgPSB0aW1lci5xdWVyeVNlbGVjdG9yKCcjdGltZXItdGltZScpO1xyXG5jb25zdCB0aW1lckJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSB0aW1lci5xdWVyeVNlbGVjdG9yKCcjdGltZXItYnV0dG9uJyk7XHJcblxyXG4vKiBjb25zdGFudHMgKi9cclxuLyogLS0tIGdlbmVyYWwgKi9cclxuY29uc3QgU0VDT05EU19JTl9NSU5VVEUgPSA2MDtcclxuLyogLS0tIHRoZW1lICovXHJcbmNvbnN0IERFRkFVTFRfRk9OVDogRm9udCA9ICdzYW5zLXNlcmlmJztcclxuY29uc3QgREVGQVVMVF9DT0xPVVI6IENvbG91ciA9ICdyZWQnO1xyXG4vKiAtLS0gdGltZXMgKi9cclxuY29uc3QgREVGQVVMVF9QT01PRE9ST19USU1FID0gMjU7XHJcbmNvbnN0IERFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSA9IDU7XHJcbmNvbnN0IERFRkFVTFRfTE9OR19CUkVBS19USU1FID0gNTtcclxuXHJcbi8qIHRoZW1lIHN0YXRlcyAqL1xyXG50eXBlIENvbG91ciA9ICdyZWQnIHwgJ2N5YW4nIHwgJ3Zpb2xldCc7XHJcbnR5cGUgRm9udCA9ICdzZXJpZicgfCAnc2Fucy1zZXJpZicgfCAnbW9ub3NwYWNlJztcclxuaW50ZXJmYWNlIFRoZW1lIHtcclxuXHRjb2xvdXI6IENvbG91cjtcclxuXHRmb250OiBGb250O1xyXG5cdHVwZGF0ZVRoZW1lOiAoZm9udDogRm9udCwgY29sb3VyOiBDb2xvdXIpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIEFwcFRoZW1lIGltcGxlbWVudHMgVGhlbWUge1xyXG5cdGNvbG91cjogQ29sb3VyID0gREVGQVVMVF9DT0xPVVI7XHJcblx0Zm9udDogRm9udCA9IERFRkFVTFRfRk9OVDtcclxuXHJcblx0dXBkYXRlVGhlbWUgPSAoZm9udDogRm9udCwgY29sb3VyOiBDb2xvdXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuY29sb3VyID0gY29sb3VyO1xyXG5cdFx0dGhpcy5mb250ID0gZm9udDtcclxuXHRcdGRvY3VtZW50LmJvZHkuZGF0YXNldC5mb250ID0gZm9udDtcclxuXHRcdGRvY3VtZW50LmJvZHkuZGF0YXNldC50aGVtZSA9IGNvbG91cjtcclxuXHR9O1xyXG59XHJcblxyXG5jb25zdCBhcHBUaGVtZTogVGhlbWUgPSBuZXcgQXBwVGhlbWUoKTtcclxuXHJcbi8qIFRpbWVyIGZ1bmN0aW9uYWxpdHkgKi9cclxudHlwZSBUaW1lclN0YXRlID0gJ0lOSVRJQUwnIHwgJ0NPVU5USU5HJyB8ICdQQVVTRUQnIHwgJ0VORCc7XHJcblxyXG5jb25zdCBtaW51dGVzVG9TZWNvbmRzID0gKG1pbnV0ZXM6IG51bWJlcik6IG51bWJlciA9PiBtaW51dGVzICogU0VDT05EU19JTl9NSU5VVEU7XHJcblxyXG5jb25zdCBnZXRNaW51dGVzRnJvbVNlY29uZHMgPSAoc2Vjb25kczogbnVtYmVyKTogbnVtYmVyID0+IE1hdGguZmxvb3Ioc2Vjb25kcyAvIFNFQ09ORFNfSU5fTUlOVVRFKTtcclxuXHJcbmNvbnN0IGdldFJlbWFpbmluZ1NlY29uZHMgPSAoc2Vjb25kczogbnVtYmVyKTogbnVtYmVyID0+IHNlY29uZHMgJSBTRUNPTkRTX0lOX01JTlVURTtcclxuXHJcbmNvbnN0IGFkZExlYWRpbmdaZXJvID0gKHRpbWU6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcblx0cmV0dXJuIHRpbWUgPCAxMCA/IGAwJHt0aW1lfWAgOiB0aW1lLnRvU3RyaW5nKCk7XHJcbn07XHJcblxyXG5jb25zdCBmb3JtYXRUaW1lID0gKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyA9PiB7XHJcblx0Y29uc3QgbWludXRlcyA9IGdldE1pbnV0ZXNGcm9tU2Vjb25kcyhzZWNvbmRzKTtcclxuXHRjb25zdCByZW1haW5pbmdTZWNvbmRzID0gZ2V0UmVtYWluaW5nU2Vjb25kcyhzZWNvbmRzKTtcclxuXHRyZXR1cm4gYWRkTGVhZGluZ1plcm8obWludXRlcykgKyAnOicgKyBhZGRMZWFkaW5nWmVybyhyZW1haW5pbmdTZWNvbmRzKTtcclxufTtcclxuXHJcbmludGVyZmFjZSBUaW1lciB7XHJcblx0c3RhdGU6IFRpbWVyU3RhdGU7XHJcblx0c3RhcnQ6ICgpID0+IHZvaWQ7XHJcblx0cGF1c2U6ICgpID0+IHZvaWQ7XHJcblx0cmVzdGFydDogKCkgPT4gdm9pZDtcclxuXHRzZXRUaW1lOiAodGltZTogbnVtYmVyKSA9PiB2b2lkO1xyXG5cdGdldFRpbWU6ICgpID0+IG51bWJlcjtcclxuXHRnZXRTdGF0ZTogKCkgPT4gVGltZXJTdGF0ZTtcclxuXHRzZXRTdGF0ZTogKHN0YXRlOiBUaW1lclN0YXRlKSA9PiB2b2lkO1xyXG59XHJcblxyXG5jbGFzcyBQb21vZG9yb1RpbWVyIGltcGxlbWVudHMgVGltZXIge1xyXG5cdGNvdW50VGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcblx0c3RhdGU6IFRpbWVyU3RhdGUgPSAnSU5JVElBTCc7XHJcblx0cHJpdmF0ZSBjb3VudGluZ1RpbWU6IG51bWJlcjtcclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHRpbWU6IG51bWJlciA9IDApIHtcclxuXHRcdHRoaXMuY291bnRpbmdUaW1lID0gdGltZTtcclxuXHR9XHJcblxyXG5cdHN0YXJ0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zdGF0ZSA9ICdDT1VOVElORyc7XHJcblx0XHR0aGlzLmNvdW50KCk7XHJcblx0fTtcclxuXHJcblx0Y291bnQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmNvdW50VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldFRpbWUodGhpcy5nZXRUaW1lKCkgLSAxKTtcclxuXHRcdFx0dGhpcy5jb3VudCgpO1xyXG5cdFx0fSwgMTAwMCk7XHJcblx0fTtcclxuXHJcblx0cGF1c2UgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnN0YXRlID0gJ1BBVVNFRCc7XHJcblx0XHRjbGVhclRpbWVvdXQodGhpcy5jb3VudFRpbWVvdXQpO1xyXG5cdH07XHJcblxyXG5cdHJlc3RhcnQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnN0YXRlID0gJ0lOSVRJQUwnO1xyXG5cdFx0dGhpcy5jb3VudGluZ1RpbWUgPSB0aGlzLnRpbWU7XHJcblx0fTtcclxuXHJcblx0Z2V0VGltZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5jb3VudGluZ1RpbWU7XHJcblxyXG5cdHNldFRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWUgPSB0aW1lO1xyXG5cdFx0dGhpcy5jb3VudGluZ1RpbWUgPSB0aW1lO1xyXG5cdFx0dGltZXJUaW1lLmlubmVyVGV4dCA9IGZvcm1hdFRpbWUodGhpcy5jb3VudGluZ1RpbWUpO1xyXG5cdH07XHJcblxyXG5cdGdldFN0YXRlID0gKCk6IFRpbWVyU3RhdGUgPT4gdGhpcy5zdGF0ZTtcclxuXHJcblx0c2V0U3RhdGUgPSAoc3RhdGU6IFRpbWVyU3RhdGUpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHR9O1xyXG59XHJcblxyXG5jbGFzcyBUaW1lckNvbnRyb2xsZXIge1xyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgdGltZXI6IFRpbWVyKSB7XHJcblx0XHR0aW1lckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMudGltZXJBY3Rpb24pO1xyXG5cdFx0dGltZXJUaW1lLmlubmVyVGV4dCA9IGZvcm1hdFRpbWUodGhpcy50aW1lci5nZXRUaW1lKCkpO1xyXG5cdH1cclxuXHJcblx0dGltZXJBY3Rpb24gPSAoKTogdm9pZCA9PiB7XHJcblx0XHRzd2l0Y2ggKHRoaXMudGltZXIuZ2V0U3RhdGUoKSkge1xyXG5cdFx0XHRjYXNlICdJTklUSUFMJzpcclxuXHRcdFx0Y2FzZSAnUEFVU0VEJzpcclxuXHRcdFx0XHR0aGlzLnRpbWVyLnN0YXJ0KCk7XHJcblx0XHRcdFx0dGltZXJCdXR0b24uaW5uZXJUZXh0ID0gJ3BhdXNlJztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnQ09VTlRJTkcnOlxyXG5cdFx0XHRcdHRoaXMudGltZXIucGF1c2UoKTtcclxuXHRcdFx0XHR0aW1lckJ1dHRvbi5pbm5lclRleHQgPSAnc3RhcnQnO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHNldFRpbWUgPSAodGltZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpbWVyLnNldFRpbWUodGltZSk7XHJcblx0fTtcclxufVxyXG4vKiBUaW1lciBmdW5jdGlvbmFsaXR5IGVuZCAqL1xyXG5cclxuLyogQXBwICovXHJcbmNsYXNzIFBvbW9kb3JvQXBwIHtcclxuXHRwcml2YXRlIHRpbWVyOiBUaW1lckNvbnRyb2xsZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSBwb21vZG9yb1RpbWU6IG51bWJlciA9IERFRkFVTFRfUE9NT0RPUk9fVElNRSxcclxuXHRcdHByaXZhdGUgc2hvcnRCcmVha1RpbWU6IG51bWJlciA9IERFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSxcclxuXHRcdHByaXZhdGUgbG9uZ0JyZWFrVGltZTogbnVtYmVyID0gREVGQVVMVF9MT05HX0JSRUFLX1RJTUVcclxuXHQpIHtcclxuXHRcdHRoaXMudGltZXIgPSBuZXcgVGltZXJDb250cm9sbGVyKG5ldyBQb21vZG9yb1RpbWVyKG1pbnV0ZXNUb1NlY29uZHModGhpcy5wb21vZG9yb1RpbWUpKSk7XHJcblx0fVxyXG5cclxuXHRzZXRUaW1lcyA9IChwb21vZG9ybzogbnVtYmVyLCBzaG9ydEJyZWFrOiBudW1iZXIsIGxvbmdCcmVhazogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnBvbW9kb3JvVGltZSA9IHBvbW9kb3JvO1xyXG5cdFx0dGhpcy5zaG9ydEJyZWFrVGltZSA9IHNob3J0QnJlYWs7XHJcblx0XHR0aGlzLmxvbmdCcmVha1RpbWUgPSBsb25nQnJlYWs7XHJcblx0fTtcclxufVxyXG5jb25zdCBwb21vZG9yb0FwcDogUG9tb2Rvcm9BcHAgPSBuZXcgUG9tb2Rvcm9BcHAoKTtcclxuXHJcbi8qIG1vZGFsIGZ1bmN0aW9ucyAqL1xyXG5jb25zdCBvcGVuTW9kYWwgPSAoKSA9PiB7XHJcblx0c2V0dGluZ3NNb2RhbC5kYXRhc2V0Lm9wZW4gPSAndHJ1ZSc7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xyXG5cdHNldHRpbmdzTW9kYWwuZGF0YXNldC5vcGVuID0gJ2ZhbHNlJztcclxufTtcclxuXHJcbnNldHRpbmdzU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IEV2ZW50KSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IHBvbW9kb3JvVGltZSA9IE51bWJlcihwb21vZG9yb1RpbWVJbnB1dC52YWx1ZSk7XHJcblx0Y29uc3Qgc2hvcnRCcmVha1RpbWUgPSBOdW1iZXIoc2hvcnRCcmVha1RpbWVJbnB1dC52YWx1ZSk7XHJcblx0Y29uc3QgbG9uZ0JyZWFrVGltZSA9IE51bWJlcihsb25nQnJlYWtUaW1lSW5wdXQudmFsdWUpO1xyXG5cdGNvbnN0IGNob3NlbkZvbnQ6IEZvbnQgPSBmb250UmFkaW9CdXR0b25zLmZpbmQoYnV0dG9uID0+IGJ1dHRvbi5jaGVja2VkKS52YWx1ZSBhcyBGb250O1xyXG5cdGNvbnN0IGNob3NlbkNvbG91cjogQ29sb3VyID0gY29sb3VyUmFkaW9CdXR0b25zLmZpbmQoYnV0dG9uID0+IGJ1dHRvbi5jaGVja2VkKS52YWx1ZSBhcyBDb2xvdXI7XHJcblx0cG9tb2Rvcm9BcHAuc2V0VGltZXMocG9tb2Rvcm9UaW1lLCBzaG9ydEJyZWFrVGltZSwgbG9uZ0JyZWFrVGltZSk7XHJcblx0YXBwVGhlbWUudXBkYXRlVGhlbWUoY2hvc2VuRm9udCwgY2hvc2VuQ29sb3VyKTtcclxuXHRjbG9zZU1vZGFsKCk7XHJcbn0pO1xyXG5cclxuLyogbW9kYWwgb3BlbmluZyBhbmQgY2xvc2luZyAqL1xyXG5zZXR0aW5nc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRvcGVuTW9kYWwoKTtcclxufSk7XHJcblxyXG5jbG9zZU1vZGFsQnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjbG9zZU1vZGFsKCk7XHJcbn0pO1xyXG4vKiBtb2RhbCBvcGVuaW5nIGFuZCBjbG9zaW5nIGVuZCAqL1xyXG4iXX0=
