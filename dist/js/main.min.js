"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var settingsButton=document.querySelector("#settings-button"),settingsModal=document.querySelector("#settings-modal"),closeModalButton=document.querySelector("#close-settings-modal-button"),settingsForm=settingsModal.querySelector("#settings-form"),pomodoroTimeInput=settingsForm.querySelector("#pomodoro-time"),shortBreakTimeInput=settingsForm.querySelector("#short-break-time"),longBreakTimeInput=settingsForm.querySelector("#long-break-time"),fontRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="font"]')),colourRadioButtons=Array.from(settingsForm.querySelectorAll('input[type="radio"][name="colour"]')),settingsSubmit=settingsForm.querySelector('button[type="submit"]'),timeStateButtons=Array.from(document.querySelectorAll(".state-button")),SECONDS_IN_MINUTE=60,DEFAULT_FONT="sans-serif",DEFAULT_COLOUR="red",DEFAULT_POMODORO_TIME=25,DEFAULT_SHORT_BREAK_TIME=5,DEFAULT_LONG_BREAK_TIME=15,AppTheme=_createClass(function t(){var o=this;_classCallCheck(this,t),this.colour=DEFAULT_COLOUR,this.font=DEFAULT_FONT,this.updateTheme=function(t,e){o.colour=e,o.font=t,document.body.dataset.font=t,document.body.dataset.theme=e}}),appTheme=new AppTheme,minutesToSeconds=function(t){return t*SECONDS_IN_MINUTE},getMinutesFromSeconds=function(t){return Math.floor(t/SECONDS_IN_MINUTE)},getRemainingSeconds=function(t){return t%SECONDS_IN_MINUTE},addLeadingZero=function(t){return t<10?"0".concat(t):t.toString()},formatTime=function(t){var e=getMinutesFromSeconds(t),t=getRemainingSeconds(t);return addLeadingZero(e)+":"+addLeadingZero(t)},PomodoroTimer=_createClass(function t(){var e=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,t),this.time=o,this.observers=[],this.state="INITIAL",this.start=function(){e.state="COUNTING",e.count()},this.count=function(){e.countTimeout=setTimeout(function(){e.setTime(e.getTime()-1),e.count()},1e3)},this.pause=function(){e.state="PAUSED",clearTimeout(e.countTimeout)},this.restart=function(){e.state="INITIAL",e.countingTime=e.time,clearTimeout(e.countTimeout)},this.getTime=function(){return e.countingTime},this.setTime=function(t){e.time=t,e.countingTime=t,e.notifyObservers()},this.getState=function(){return e.state},this.setState=function(t){e.state=t},this.addObserver=function(t){e.observers.push(t)},this.notifyObservers=function(){e.observers.forEach(function(t){return t.update(e.countingTime,e.time)})},this.countingTime=o}),TimerView=_createClass(function t(e){var o=this;_classCallCheck(this,t),this.update=function(t,e){o.updateTime(t)},this.updateButtonLabel=function(t){o.timerButton.innerText=t},this.updateTime=function(t){o.timerTime.innerHTML=formatTime(t)},this.timer=document.querySelector(".timer"),this.timeProgressBar=this.timer.querySelector("#progress-bar"),this.timerTime=this.timer.querySelector("#timer-time"),this.timerButton=this.timer.querySelector("#timer-button"),this.timerButton.addEventListener("click",e)}),TimerController=_createClass(function t(e){var o=this;_classCallCheck(this,t),this.timer=e,this.timerAction=function(){switch(o.timer.getState()){case"INITIAL":case"PAUSED":o.timer.start(),o.view.updateButtonLabel("pause");break;case"COUNTING":o.timer.pause(),o.view.updateButtonLabel("start")}},this.restartTimer=function(){o.timer.restart(),o.view.updateButtonLabel("start")},this.setTime=function(t){o.timer.setTime(t)},this.view=new TimerView(this.timerAction),e.addObserver(this.view),this.view.update(this.timer.getTime(),this.timer.getTime())}),PomodoroApp=_createClass(function t(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_POMODORO_TIME,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:DEFAULT_SHORT_BREAK_TIME,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:DEFAULT_LONG_BREAK_TIME;_classCallCheck(this,t),this.pomodoroTime=e,this.shortBreakTime=o,this.longBreakTime=n,this.appState="POMODORO",this.setTimes=function(t,e,o){i.pomodoroTime=t,i.shortBreakTime=e,i.longBreakTime=o,i.changeState(i.appState)},this.changeState=function(t){i.appState=t,i.timer.restartTimer(),i.setTimerBasedOnState()},this.setTimerBasedOnState=function(){switch(i.appState){case"POMODORO":i.timer.setTime(minutesToSeconds(i.pomodoroTime));break;case"SHORT_BREAK":i.timer.setTime(minutesToSeconds(i.shortBreakTime));break;case"LONG_BREAK":i.timer.setTime(minutesToSeconds(i.longBreakTime))}},this.timer=new TimerController(new PomodoroTimer(minutesToSeconds(this.pomodoroTime)))}),pomodoroApp=new PomodoroApp,openModal=function(){settingsModal.dataset.open="true"},closeModal=function(){settingsModal.dataset.open="false"},activateStateButton=function(t){timeStateButtons.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active")};settingsSubmit.addEventListener("click",function(t){t.preventDefault();var t=Number(pomodoroTimeInput.value),e=Number(shortBreakTimeInput.value),o=Number(longBreakTimeInput.value),i=fontRadioButtons.find(function(t){return t.checked}).value,n=colourRadioButtons.find(function(t){return t.checked}).value;pomodoroApp.setTimes(t,e,o),appTheme.updateTheme(i,n),closeModal()}),settingsButton.addEventListener("click",function(){openModal()}),null!=closeModalButton&&closeModalButton.addEventListener("click",function(){closeModal()}),timeStateButtons.forEach(function(t){return t.addEventListener("click",function(t){var t=t.target,e=t.dataset.state.toUpperCase();activateStateButton(t),pomodoroApp.changeState(e)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsic2V0dGluZ3NCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXR0aW5nc01vZGFsIiwiY2xvc2VNb2RhbEJ1dHRvbiIsInNldHRpbmdzRm9ybSIsInBvbW9kb3JvVGltZUlucHV0Iiwic2hvcnRCcmVha1RpbWVJbnB1dCIsImxvbmdCcmVha1RpbWVJbnB1dCIsImZvbnRSYWRpb0J1dHRvbnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sb3VyUmFkaW9CdXR0b25zIiwic2V0dGluZ3NTdWJtaXQiLCJ0aW1lU3RhdGVCdXR0b25zIiwiU0VDT05EU19JTl9NSU5VVEUiLCJERUZBVUxUX0ZPTlQiLCJERUZBVUxUX0NPTE9VUiIsIkRFRkFVTFRfUE9NT0RPUk9fVElNRSIsIkRFRkFVTFRfU0hPUlRfQlJFQUtfVElNRSIsIkRFRkFVTFRfTE9OR19CUkVBS19USU1FIiwiQXBwVGhlbWUiLCJfY3JlYXRlQ2xhc3MiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJjb2xvdXIiLCJmb250IiwidXBkYXRlVGhlbWUiLCJib2R5IiwiZGF0YXNldCIsInRoZW1lIiwiYXBwVGhlbWUiLCJtaW51dGVzVG9TZWNvbmRzIiwibWludXRlcyIsImdldE1pbnV0ZXNGcm9tU2Vjb25kcyIsInNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJnZXRSZW1haW5pbmdTZWNvbmRzIiwiYWRkTGVhZGluZ1plcm8iLCJ0aW1lIiwiY29uY2F0IiwidG9TdHJpbmciLCJmb3JtYXRUaW1lIiwicmVtYWluaW5nU2Vjb25kcyIsIlBvbW9kb3JvVGltZXIiLCJfdGhpczIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJvYnNlcnZlcnMiLCJzdGF0ZSIsInN0YXJ0IiwiY291bnQiLCJjb3VudFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2V0VGltZSIsImdldFRpbWUiLCJwYXVzZSIsImNsZWFyVGltZW91dCIsInJlc3RhcnQiLCJjb3VudGluZ1RpbWUiLCJub3RpZnlPYnNlcnZlcnMiLCJnZXRTdGF0ZSIsInNldFN0YXRlIiwiYWRkT2JzZXJ2ZXIiLCJvYnNlcnZlciIsInB1c2giLCJmb3JFYWNoIiwidXBkYXRlIiwiVGltZXJWaWV3IiwiYnV0dG9uT25DbGljayIsIl90aGlzMyIsImN1cnJlbnQiLCJiYXNlIiwidXBkYXRlVGltZSIsInVwZGF0ZUJ1dHRvbkxhYmVsIiwibGFiZWwiLCJ0aW1lckJ1dHRvbiIsImlubmVyVGV4dCIsInRpbWVyVGltZSIsImlubmVySFRNTCIsInRpbWVyIiwidGltZVByb2dyZXNzQmFyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlRpbWVyQ29udHJvbGxlciIsIl90aGlzNCIsInRpbWVyQWN0aW9uIiwidmlldyIsInJlc3RhcnRUaW1lciIsIlBvbW9kb3JvQXBwIiwiX3RoaXM1IiwicG9tb2Rvcm9UaW1lIiwic2hvcnRCcmVha1RpbWUiLCJsb25nQnJlYWtUaW1lIiwiYXBwU3RhdGUiLCJzZXRUaW1lcyIsInBvbW9kb3JvIiwic2hvcnRCcmVhayIsImxvbmdCcmVhayIsImNoYW5nZVN0YXRlIiwic2V0VGltZXJCYXNlZE9uU3RhdGUiLCJwb21vZG9yb0FwcCIsIm9wZW5Nb2RhbCIsIm9wZW4iLCJjbG9zZU1vZGFsIiwiYWN0aXZhdGVTdGF0ZUJ1dHRvbiIsImJ1dHRvbiIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIk51bWJlciIsInZhbHVlIiwiY2hvc2VuRm9udCIsImZpbmQiLCJjaGVja2VkIiwiY2hvc2VuQ29sb3VyIiwidGFyZ2V0IiwidG9VcHBlckNhc2UiXSwibWFwcGluZ3MiOiIyakNBQ0EsSUFBTUEsZUFBb0NDLFNBQVNDLGNBQWMsa0JBQWtCLEVBQzdFQyxjQUE2QkYsU0FBU0MsY0FBYyxpQkFBaUIsRUFDckVFLGlCQUFzQ0gsU0FBU0MsY0FBYyw4QkFBOEIsRUFHM0ZHLGFBQWdDRixjQUFjRCxjQUFjLGdCQUFnQixF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S0FBSyxTQUFBVCxHQUFNLE9BQUlBLEVBQU9VLE9BQU8sQ0FBQSxFQUFFSCxNQUMvRVosWUFBWU4sU0FBU0osRUFBY0MsRUFBZ0JDLENBQWEsRUFDaEUvRCxTQUFTSixZQUFZd0YsRUFBWUcsQ0FBWSxFQUM3Q2IsV0FBVSxDQUNYLENBQUMsRUFHRDNHLGVBQWVzRixpQkFBaUIsUUFBUyxXQUN4Q21CLFVBQVMsQ0FDVixDQUFDLEVBRURyRyxNQUFBQSxrQkFBQUEsaUJBQWtCa0YsaUJBQWlCLFFBQVMsV0FDM0NxQixXQUFVLENBQ1gsQ0FBQyxFQUdENUYsaUJBQWlCdUQsUUFBUSxTQUFBdUMsR0FBTSxPQUM5QkEsRUFBT3ZCLGlCQUFpQixRQUFTLFNBQUMyQixHQUNqQyxJQUFNSixFQUE0QkksRUFBRVEsT0FDOUJwRSxFQUEyQndELEVBQU85RSxRQUFRc0IsTUFBTXFFLFlBQVcsRUFDakVkLG9CQUFvQkMsQ0FBTSxFQUMxQkwsWUFBWUYsWUFBWWpELENBQUssQ0FDOUIsQ0FBQyxDQUFDLENBQUEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBtb2RhbCBhbmQgbW9kYWwgcmVhbHRlZCBlbGVtZW50cyAqL1xyXG5jb25zdCBzZXR0aW5nc0J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2V0dGluZ3MtYnV0dG9uJyk7XHJcbmNvbnN0IHNldHRpbmdzTW9kYWw6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NldHRpbmdzLW1vZGFsJyk7XHJcbmNvbnN0IGNsb3NlTW9kYWxCdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlLXNldHRpbmdzLW1vZGFsLWJ1dHRvbicpO1xyXG5cclxuLyogc2V0dGluZ3MgZm9ybSBlbGVtZW50cyAqL1xyXG5jb25zdCBzZXR0aW5nc0Zvcm06IEhUTUxGb3JtRWxlbWVudCA9IHNldHRpbmdzTW9kYWwucXVlcnlTZWxlY3RvcignI3NldHRpbmdzLWZvcm0nKTtcclxuY29uc3QgcG9tb2Rvcm9UaW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignI3BvbW9kb3JvLXRpbWUnKTtcclxuY29uc3Qgc2hvcnRCcmVha1RpbWVJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yKCcjc2hvcnQtYnJlYWstdGltZScpO1xyXG5jb25zdCBsb25nQnJlYWtUaW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBzZXR0aW5nc0Zvcm0ucXVlcnlTZWxlY3RvcignI2xvbmctYnJlYWstdGltZScpO1xyXG5jb25zdCBmb250UmFkaW9CdXR0b25zOiBBcnJheTxIVE1MSW5wdXRFbGVtZW50PiA9IEFycmF5LmZyb20oXHJcblx0c2V0dGluZ3NGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiZm9udFwiXScpXHJcbik7XHJcbmNvbnN0IGNvbG91clJhZGlvQnV0dG9uczogQXJyYXk8SFRNTElucHV0RWxlbWVudD4gPSBBcnJheS5mcm9tKFxyXG5cdHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl1bbmFtZT1cImNvbG91clwiXScpXHJcbik7XHJcbmNvbnN0IHNldHRpbmdzU3VibWl0OiBIVE1MQnV0dG9uRWxlbWVudCA9IHNldHRpbmdzRm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG5cclxuLyogdGltZSBzdGF0ZSBidXR0b25zICovXHJcbmNvbnN0IHRpbWVTdGF0ZUJ1dHRvbnM6IEFycmF5PEhUTUxCdXR0b25FbGVtZW50PiA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0YXRlLWJ1dHRvbicpKTtcclxuXHJcbi8qIGNvbnN0YW50cyAqL1xyXG4vKiAtLS0gZ2VuZXJhbCAqL1xyXG5jb25zdCBTRUNPTkRTX0lOX01JTlVURTogbnVtYmVyID0gNjA7XHJcbi8qIC0tLSB0aGVtZSAqL1xyXG5jb25zdCBERUZBVUxUX0ZPTlQ6IEZvbnQgPSAnc2Fucy1zZXJpZic7XHJcbmNvbnN0IERFRkFVTFRfQ09MT1VSOiBDb2xvdXIgPSAncmVkJztcclxuLyogLS0tIHRpbWVzICovXHJcbmNvbnN0IERFRkFVTFRfUE9NT0RPUk9fVElNRTogbnVtYmVyID0gMjU7XHJcbmNvbnN0IERFRkFVTFRfU0hPUlRfQlJFQUtfVElNRTogbnVtYmVyID0gNTtcclxuY29uc3QgREVGQVVMVF9MT05HX0JSRUFLX1RJTUU6IG51bWJlciA9IDE1O1xyXG5cclxuLyogT2JzZXJ2ZXIgcGF0dGVybiBpbnRlcmZhY2VzICovXHJcbmludGVyZmFjZSBPYnNlcnZhYmxlPFQ+IHtcclxuXHRhZGRPYnNlcnZlcjogKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4gdm9pZDtcclxuXHRub3RpZnlPYnNlcnZlcnM6ICgpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBPYnNlcnZlcjxUPiB7XHJcblx0dXBkYXRlOiAoY3VycmVudDogVCwgYmFzZTogVCkgPT4gdm9pZDtcclxufVxyXG5cclxuLyogdGhlbWUgc3RhdGVzICovXHJcbnR5cGUgQ29sb3VyID0gJ3JlZCcgfCAnY3lhbicgfCAndmlvbGV0JztcclxudHlwZSBGb250ID0gJ3NlcmlmJyB8ICdzYW5zLXNlcmlmJyB8ICdtb25vc3BhY2UnO1xyXG5pbnRlcmZhY2UgVGhlbWUge1xyXG5cdGNvbG91cjogQ29sb3VyO1xyXG5cdGZvbnQ6IEZvbnQ7XHJcblx0dXBkYXRlVGhlbWU6IChmb250OiBGb250LCBjb2xvdXI6IENvbG91cikgPT4gdm9pZDtcclxufVxyXG5cclxuY2xhc3MgQXBwVGhlbWUgaW1wbGVtZW50cyBUaGVtZSB7XHJcblx0Y29sb3VyOiBDb2xvdXIgPSBERUZBVUxUX0NPTE9VUjtcclxuXHRmb250OiBGb250ID0gREVGQVVMVF9GT05UO1xyXG5cclxuXHR1cGRhdGVUaGVtZSA9IChmb250OiBGb250LCBjb2xvdXI6IENvbG91cik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5jb2xvdXIgPSBjb2xvdXI7XHJcblx0XHR0aGlzLmZvbnQgPSBmb250O1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5kYXRhc2V0LmZvbnQgPSBmb250O1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5kYXRhc2V0LnRoZW1lID0gY29sb3VyO1xyXG5cdH07XHJcbn1cclxuXHJcbmNvbnN0IGFwcFRoZW1lOiBUaGVtZSA9IG5ldyBBcHBUaGVtZSgpO1xyXG5cclxuLyogVGltZXIgZnVuY3Rpb25hbGl0eSAqL1xyXG50eXBlIFRpbWVyU3RhdGUgPSAnSU5JVElBTCcgfCAnQ09VTlRJTkcnIHwgJ1BBVVNFRCcgfCAnRU5EJztcclxuXHJcbmNvbnN0IG1pbnV0ZXNUb1NlY29uZHMgPSAobWludXRlczogbnVtYmVyKTogbnVtYmVyID0+IG1pbnV0ZXMgKiBTRUNPTkRTX0lOX01JTlVURTtcclxuXHJcbmNvbnN0IGdldE1pbnV0ZXNGcm9tU2Vjb25kcyA9IChzZWNvbmRzOiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5mbG9vcihzZWNvbmRzIC8gU0VDT05EU19JTl9NSU5VVEUpO1xyXG5cclxuY29uc3QgZ2V0UmVtYWluaW5nU2Vjb25kcyA9IChzZWNvbmRzOiBudW1iZXIpOiBudW1iZXIgPT4gc2Vjb25kcyAlIFNFQ09ORFNfSU5fTUlOVVRFO1xyXG5cclxuY29uc3QgYWRkTGVhZGluZ1plcm8gPSAodGltZTogbnVtYmVyKTogc3RyaW5nID0+IHtcclxuXHRyZXR1cm4gdGltZSA8IDEwID8gYDAke3RpbWV9YCA6IHRpbWUudG9TdHJpbmcoKTtcclxufTtcclxuXHJcbmNvbnN0IGZvcm1hdFRpbWUgPSAoc2Vjb25kczogbnVtYmVyKTogc3RyaW5nID0+IHtcclxuXHRjb25zdCBtaW51dGVzID0gZ2V0TWludXRlc0Zyb21TZWNvbmRzKHNlY29uZHMpO1xyXG5cdGNvbnN0IHJlbWFpbmluZ1NlY29uZHMgPSBnZXRSZW1haW5pbmdTZWNvbmRzKHNlY29uZHMpO1xyXG5cdHJldHVybiBhZGRMZWFkaW5nWmVybyhtaW51dGVzKSArICc6JyArIGFkZExlYWRpbmdaZXJvKHJlbWFpbmluZ1NlY29uZHMpO1xyXG59O1xyXG5cclxuaW50ZXJmYWNlIFRpbWVyIGV4dGVuZHMgT2JzZXJ2YWJsZTxudW1iZXI+IHtcclxuXHRzdGF0ZTogVGltZXJTdGF0ZTtcclxuXHRzdGFydDogKCkgPT4gdm9pZDtcclxuXHRwYXVzZTogKCkgPT4gdm9pZDtcclxuXHRyZXN0YXJ0OiAoKSA9PiB2b2lkO1xyXG5cdHNldFRpbWU6ICh0aW1lOiBudW1iZXIpID0+IHZvaWQ7XHJcblx0Z2V0VGltZTogKCkgPT4gbnVtYmVyO1xyXG5cdGdldFN0YXRlOiAoKSA9PiBUaW1lclN0YXRlO1xyXG5cdHNldFN0YXRlOiAoc3RhdGU6IFRpbWVyU3RhdGUpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIFBvbW9kb3JvVGltZXIgaW1wbGVtZW50cyBUaW1lciB7XHJcblx0b2JzZXJ2ZXJzOiBPYnNlcnZlcjxudW1iZXI+W10gPSBbXTtcclxuXHRjb3VudFRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xyXG5cdHN0YXRlOiBUaW1lclN0YXRlID0gJ0lOSVRJQUwnO1xyXG5cdHByaXZhdGUgY291bnRpbmdUaW1lOiBudW1iZXI7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSB0aW1lOiBudW1iZXIgPSAwKSB7XHJcblx0XHR0aGlzLmNvdW50aW5nVGltZSA9IHRpbWU7XHJcblx0fVxyXG5cclxuXHRzdGFydCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc3RhdGUgPSAnQ09VTlRJTkcnO1xyXG5cdFx0dGhpcy5jb3VudCgpO1xyXG5cdH07XHJcblxyXG5cdGNvdW50ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5jb3VudFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy5zZXRUaW1lKHRoaXMuZ2V0VGltZSgpIC0gMSk7XHJcblx0XHRcdHRoaXMuY291bnQoKTtcclxuXHRcdH0sIDEwMDApO1xyXG5cdH07XHJcblxyXG5cdHBhdXNlID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zdGF0ZSA9ICdQQVVTRUQnO1xyXG5cdFx0Y2xlYXJUaW1lb3V0KHRoaXMuY291bnRUaW1lb3V0KTtcclxuXHR9O1xyXG5cclxuXHRyZXN0YXJ0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5zdGF0ZSA9ICdJTklUSUFMJztcclxuXHRcdHRoaXMuY291bnRpbmdUaW1lID0gdGhpcy50aW1lO1xyXG5cdFx0Y2xlYXJUaW1lb3V0KHRoaXMuY291bnRUaW1lb3V0KTtcclxuXHR9O1xyXG5cclxuXHRnZXRUaW1lID0gKCk6IG51bWJlciA9PiB0aGlzLmNvdW50aW5nVGltZTtcclxuXHJcblx0c2V0VGltZSA9ICh0aW1lOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZSA9IHRpbWU7XHJcblx0XHR0aGlzLmNvdW50aW5nVGltZSA9IHRpbWU7XHJcblx0XHR0aGlzLm5vdGlmeU9ic2VydmVycygpO1xyXG5cdH07XHJcblxyXG5cdGdldFN0YXRlID0gKCk6IFRpbWVyU3RhdGUgPT4gdGhpcy5zdGF0ZTtcclxuXHJcblx0c2V0U3RhdGUgPSAoc3RhdGU6IFRpbWVyU3RhdGUpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHR9O1xyXG5cclxuXHRhZGRPYnNlcnZlciA9IChvYnNlcnZlcjogT2JzZXJ2ZXI8bnVtYmVyPik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcblx0fTtcclxuXHJcblx0bm90aWZ5T2JzZXJ2ZXJzID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5vYnNlcnZlcnMuZm9yRWFjaChvYnNlcnZlciA9PiBvYnNlcnZlci51cGRhdGUodGhpcy5jb3VudGluZ1RpbWUsIHRoaXMudGltZSkpO1xyXG5cdH07XHJcbn1cclxuXHJcbmNsYXNzIFRpbWVyVmlldyBpbXBsZW1lbnRzIE9ic2VydmVyPG51bWJlcj4ge1xyXG5cdHByaXZhdGUgdGltZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgdGltZVByb2dyZXNzQmFyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHRpbWVyVGltZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0aW1lckJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGJ1dHRvbk9uQ2xpY2s6IChlOiBFdmVudCkgPT4gdm9pZCkge1xyXG5cdFx0dGhpcy50aW1lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lcicpO1xyXG5cdFx0dGhpcy50aW1lUHJvZ3Jlc3NCYXIgPSB0aGlzLnRpbWVyLnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy1iYXInKTtcclxuXHRcdHRoaXMudGltZXJUaW1lID0gdGhpcy50aW1lci5xdWVyeVNlbGVjdG9yKCcjdGltZXItdGltZScpO1xyXG5cdFx0dGhpcy50aW1lckJ1dHRvbiA9IHRoaXMudGltZXIucXVlcnlTZWxlY3RvcignI3RpbWVyLWJ1dHRvbicpO1xyXG5cdFx0dGhpcy50aW1lckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGJ1dHRvbk9uQ2xpY2spO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlID0gKGN1cnJlbnQ6IG51bWJlciwgYmFzZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnVwZGF0ZVRpbWUoY3VycmVudCk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlQnV0dG9uTGFiZWwgPSAobGFiZWw6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lckJ1dHRvbi5pbm5lclRleHQgPSBsYWJlbDtcclxuXHR9O1xyXG5cclxuXHR1cGRhdGVUaW1lID0gKHRpbWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lclRpbWUuaW5uZXJIVE1MID0gZm9ybWF0VGltZSh0aW1lKTtcclxuXHR9O1xyXG59XHJcblxyXG5jbGFzcyBUaW1lckNvbnRyb2xsZXIge1xyXG5cdHByaXZhdGUgdmlldzogVGltZXJWaWV3O1xyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgdGltZXI6IFRpbWVyKSB7XHJcblx0XHR0aGlzLnZpZXcgPSBuZXcgVGltZXJWaWV3KHRoaXMudGltZXJBY3Rpb24pO1xyXG5cdFx0dGltZXIuYWRkT2JzZXJ2ZXIodGhpcy52aWV3KTtcclxuXHRcdHRoaXMudmlldy51cGRhdGUodGhpcy50aW1lci5nZXRUaW1lKCksIHRoaXMudGltZXIuZ2V0VGltZSgpKTtcclxuXHR9XHJcblxyXG5cdHRpbWVyQWN0aW9uID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0c3dpdGNoICh0aGlzLnRpbWVyLmdldFN0YXRlKCkpIHtcclxuXHRcdFx0Y2FzZSAnSU5JVElBTCc6XHJcblx0XHRcdGNhc2UgJ1BBVVNFRCc6XHJcblx0XHRcdFx0dGhpcy50aW1lci5zdGFydCgpO1xyXG5cdFx0XHRcdHRoaXMudmlldy51cGRhdGVCdXR0b25MYWJlbCgncGF1c2UnKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnQ09VTlRJTkcnOlxyXG5cdFx0XHRcdHRoaXMudGltZXIucGF1c2UoKTtcclxuXHRcdFx0XHR0aGlzLnZpZXcudXBkYXRlQnV0dG9uTGFiZWwoJ3N0YXJ0Jyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cmVzdGFydFRpbWVyID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy50aW1lci5yZXN0YXJ0KCk7XHJcblx0XHR0aGlzLnZpZXcudXBkYXRlQnV0dG9uTGFiZWwoJ3N0YXJ0Jyk7XHJcblx0fTtcclxuXHJcblx0c2V0VGltZSA9ICh0aW1lOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMudGltZXIuc2V0VGltZSh0aW1lKTtcclxuXHR9O1xyXG59XHJcbi8qIFRpbWVyIGZ1bmN0aW9uYWxpdHkgZW5kICovXHJcblxyXG4vKiBBcHAgKi9cclxudHlwZSBQb21vZG9yb0FwcFN0YXRlcyA9ICdQT01PRE9STycgfCAnU0hPUlRfQlJFQUsnIHwgJ0xPTkdfQlJFQUsnO1xyXG5jbGFzcyBQb21vZG9yb0FwcCB7XHJcblx0cHJpdmF0ZSB0aW1lcjogVGltZXJDb250cm9sbGVyO1xyXG5cdHByaXZhdGUgYXBwU3RhdGU6IFBvbW9kb3JvQXBwU3RhdGVzID0gJ1BPTU9ET1JPJztcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIHBvbW9kb3JvVGltZTogbnVtYmVyID0gREVGQVVMVF9QT01PRE9ST19USU1FLFxyXG5cdFx0cHJpdmF0ZSBzaG9ydEJyZWFrVGltZTogbnVtYmVyID0gREVGQVVMVF9TSE9SVF9CUkVBS19USU1FLFxyXG5cdFx0cHJpdmF0ZSBsb25nQnJlYWtUaW1lOiBudW1iZXIgPSBERUZBVUxUX0xPTkdfQlJFQUtfVElNRVxyXG5cdCkge1xyXG5cdFx0dGhpcy50aW1lciA9IG5ldyBUaW1lckNvbnRyb2xsZXIobmV3IFBvbW9kb3JvVGltZXIobWludXRlc1RvU2Vjb25kcyh0aGlzLnBvbW9kb3JvVGltZSkpKTtcclxuXHR9XHJcblxyXG5cdHNldFRpbWVzID0gKHBvbW9kb3JvOiBudW1iZXIsIHNob3J0QnJlYWs6IG51bWJlciwgbG9uZ0JyZWFrOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucG9tb2Rvcm9UaW1lID0gcG9tb2Rvcm87XHJcblx0XHR0aGlzLnNob3J0QnJlYWtUaW1lID0gc2hvcnRCcmVhaztcclxuXHRcdHRoaXMubG9uZ0JyZWFrVGltZSA9IGxvbmdCcmVhaztcclxuXHRcdHRoaXMuY2hhbmdlU3RhdGUodGhpcy5hcHBTdGF0ZSk7XHJcblx0fTtcclxuXHJcblx0Y2hhbmdlU3RhdGUgPSAoc3RhdGU6IFBvbW9kb3JvQXBwU3RhdGVzKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmFwcFN0YXRlID0gc3RhdGU7XHJcblx0XHR0aGlzLnRpbWVyLnJlc3RhcnRUaW1lcigpO1xyXG5cdFx0dGhpcy5zZXRUaW1lckJhc2VkT25TdGF0ZSgpO1xyXG5cdH07XHJcblxyXG5cdHNldFRpbWVyQmFzZWRPblN0YXRlID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0c3dpdGNoICh0aGlzLmFwcFN0YXRlKSB7XHJcblx0XHRcdGNhc2UgJ1BPTU9ET1JPJzpcclxuXHRcdFx0XHR0aGlzLnRpbWVyLnNldFRpbWUobWludXRlc1RvU2Vjb25kcyh0aGlzLnBvbW9kb3JvVGltZSkpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdTSE9SVF9CUkVBSyc6XHJcblx0XHRcdFx0dGhpcy50aW1lci5zZXRUaW1lKG1pbnV0ZXNUb1NlY29uZHModGhpcy5zaG9ydEJyZWFrVGltZSkpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdMT05HX0JSRUFLJzpcclxuXHRcdFx0XHR0aGlzLnRpbWVyLnNldFRpbWUobWludXRlc1RvU2Vjb25kcyh0aGlzLmxvbmdCcmVha1RpbWUpKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcbmNvbnN0IHBvbW9kb3JvQXBwOiBQb21vZG9yb0FwcCA9IG5ldyBQb21vZG9yb0FwcCgpO1xyXG5cclxuLyogbW9kYWwgZnVuY3Rpb25zICovXHJcbmNvbnN0IG9wZW5Nb2RhbCA9ICgpID0+IHtcclxuXHRzZXR0aW5nc01vZGFsLmRhdGFzZXQub3BlbiA9ICd0cnVlJztcclxufTtcclxuXHJcbmNvbnN0IGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcblx0c2V0dGluZ3NNb2RhbC5kYXRhc2V0Lm9wZW4gPSAnZmFsc2UnO1xyXG59O1xyXG5cclxuLyogYXBwIHRpbWUgc3RhdGUgYnV0dG9ucyBmdW5jdGlvbnMgKi9cclxuY29uc3QgYWN0aXZhdGVTdGF0ZUJ1dHRvbiA9IChidXR0b246IEhUTUxCdXR0b25FbGVtZW50KSA9PiB7XHJcblx0dGltZVN0YXRlQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xyXG5cdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxufTtcclxuXHJcbnNldHRpbmdzU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IEV2ZW50KSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IHBvbW9kb3JvVGltZSA9IE51bWJlcihwb21vZG9yb1RpbWVJbnB1dC52YWx1ZSk7XHJcblx0Y29uc3Qgc2hvcnRCcmVha1RpbWUgPSBOdW1iZXIoc2hvcnRCcmVha1RpbWVJbnB1dC52YWx1ZSk7XHJcblx0Y29uc3QgbG9uZ0JyZWFrVGltZSA9IE51bWJlcihsb25nQnJlYWtUaW1lSW5wdXQudmFsdWUpO1xyXG5cdGNvbnN0IGNob3NlbkZvbnQ6IEZvbnQgPSBmb250UmFkaW9CdXR0b25zLmZpbmQoYnV0dG9uID0+IGJ1dHRvbi5jaGVja2VkKS52YWx1ZSBhcyBGb250O1xyXG5cdGNvbnN0IGNob3NlbkNvbG91cjogQ29sb3VyID0gY29sb3VyUmFkaW9CdXR0b25zLmZpbmQoYnV0dG9uID0+IGJ1dHRvbi5jaGVja2VkKS52YWx1ZSBhcyBDb2xvdXI7XHJcblx0cG9tb2Rvcm9BcHAuc2V0VGltZXMocG9tb2Rvcm9UaW1lLCBzaG9ydEJyZWFrVGltZSwgbG9uZ0JyZWFrVGltZSk7XHJcblx0YXBwVGhlbWUudXBkYXRlVGhlbWUoY2hvc2VuRm9udCwgY2hvc2VuQ29sb3VyKTtcclxuXHRjbG9zZU1vZGFsKCk7XHJcbn0pO1xyXG5cclxuLyogbW9kYWwgb3BlbmluZyBhbmQgY2xvc2luZyAqL1xyXG5zZXR0aW5nc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRvcGVuTW9kYWwoKTtcclxufSk7XHJcblxyXG5jbG9zZU1vZGFsQnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjbG9zZU1vZGFsKCk7XHJcbn0pO1xyXG4vKiBtb2RhbCBvcGVuaW5nIGFuZCBjbG9zaW5nIGVuZCAqL1xyXG5cclxudGltZVN0YXRlQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PlxyXG5cdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBFdmVudCkgPT4ge1xyXG5cdFx0Y29uc3QgYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGUudGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdFx0Y29uc3Qgc3RhdGU6IFBvbW9kb3JvQXBwU3RhdGVzID0gYnV0dG9uLmRhdGFzZXQuc3RhdGUudG9VcHBlckNhc2UoKSBhcyBQb21vZG9yb0FwcFN0YXRlcztcclxuXHRcdGFjdGl2YXRlU3RhdGVCdXR0b24oYnV0dG9uKTtcclxuXHRcdHBvbW9kb3JvQXBwLmNoYW5nZVN0YXRlKHN0YXRlKTtcclxuXHR9KVxyXG4pO1xyXG4iXX0=
